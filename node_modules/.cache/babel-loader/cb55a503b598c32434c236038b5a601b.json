{"ast":null,"code":"/*!\n * wavesurfer.js regions plugin 5.2.0 (2021-08-16)\n * https://wavesurfer-js.org\n * @license BSD-3-Clause\n */\n!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(\"WaveSurfer\", [], t) : \"object\" == typeof exports ? exports.WaveSurfer = t() : (e.WaveSurfer = e.WaveSurfer || {}, e.WaveSurfer.regions = t());\n}(self, function () {\n  return (() => {\n    \"use strict\";\n\n    var e = {\n      23: (e, t, r) => {\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), t.default = void 0;\n        var i = r(638);\n\n        function n(e, t) {\n          var r = Object.keys(e);\n\n          if (Object.getOwnPropertySymbols) {\n            var i = Object.getOwnPropertySymbols(e);\n            t && (i = i.filter(function (t) {\n              return Object.getOwnPropertyDescriptor(e, t).enumerable;\n            })), r.push.apply(r, i);\n          }\n\n          return r;\n        }\n\n        function a(e) {\n          for (var t = 1; t < arguments.length; t++) {\n            var r = null != arguments[t] ? arguments[t] : {};\n            t % 2 ? n(Object(r), !0).forEach(function (t) {\n              s(e, t, r[t]);\n            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : n(Object(r)).forEach(function (t) {\n              Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t));\n            });\n          }\n\n          return e;\n        }\n\n        function s(e, t, r) {\n          return t in e ? Object.defineProperty(e, t, {\n            value: r,\n            enumerable: !0,\n            configurable: !0,\n            writable: !0\n          }) : e[t] = r, e;\n        }\n\n        function o(e, t) {\n          for (var r = 0; r < t.length; r++) {\n            var i = t[r];\n            i.enumerable = i.enumerable || !1, i.configurable = !0, \"value\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);\n          }\n        }\n\n        var l = function () {\n          function e(t, r) {\n            var n = this;\n            !function (e, t) {\n              if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n            }(this, e), this.params = t, this.wavesurfer = r, this.util = a(a({}, r.util), {}, {\n              getRegionSnapToGridValue: function (e) {\n                return n.getRegionSnapToGridValue(e, t);\n              }\n            }), this.maxRegions = t.maxRegions, this.regionsMinLength = t.regionsMinLength || null, Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(function (e) {\n              i.Region.prototype[e] = n.util.Observer.prototype[e];\n            }), this.wavesurfer.Region = i.Region;\n            this._onBackendCreated = function () {\n              n.wrapper = n.wavesurfer.drawer.wrapper, n.orientation = n.wavesurfer.drawer.orientation, n.params.regions && n.params.regions.forEach(function (e) {\n                e.edgeScrollWidth = n.params.edgeScrollWidth || .05 * n.wrapper.clientWidth, n.add(e);\n              });\n            }, this.list = {}, this._onReady = function () {\n              n.wrapper = n.wavesurfer.drawer.wrapper, n.vertical = n.wavesurfer.drawer.params.vertical, n.params.dragSelection && n.enableDragSelection(n.params), Object.keys(n.list).forEach(function (e) {\n                n.list[e].updateRender();\n              });\n            };\n          }\n\n          var t, r, n;\n          return t = e, n = [{\n            key: \"create\",\n            value: function (t) {\n              return {\n                name: \"regions\",\n                deferInit: !(!t || !t.deferInit) && t.deferInit,\n                params: t,\n                staticProps: {\n                  addRegion: function (e) {\n                    return this.initialisedPluginList.regions || this.initPlugin(\"regions\"), this.regions.add(e);\n                  },\n                  clearRegions: function () {\n                    this.regions && this.regions.clear();\n                  },\n                  enableDragSelection: function (e) {\n                    this.initialisedPluginList.regions || this.initPlugin(\"regions\"), this.regions.enableDragSelection(e);\n                  },\n                  disableDragSelection: function () {\n                    this.regions.disableDragSelection();\n                  }\n                },\n                instance: e\n              };\n            }\n          }], (r = [{\n            key: \"init\",\n            value: function () {\n              this.wavesurfer.isReady ? (this._onBackendCreated(), this._onReady()) : (this.wavesurfer.once(\"ready\", this._onReady), this.wavesurfer.once(\"backend-created\", this._onBackendCreated));\n            }\n          }, {\n            key: \"destroy\",\n            value: function () {\n              this.wavesurfer.un(\"ready\", this._onReady), this.wavesurfer.un(\"backend-created\", this._onBackendCreated), this.disableDragSelection(), this.clear();\n            }\n          }, {\n            key: \"wouldExceedMaxRegions\",\n            value: function () {\n              return this.maxRegions && Object.keys(this.list).length >= this.maxRegions;\n            }\n          }, {\n            key: \"add\",\n            value: function (e) {\n              var t = this;\n              if (this.wouldExceedMaxRegions()) return null;\n              !e.minLength && this.regionsMinLength && (e = a(a({}, e), {}, {\n                minLength: this.regionsMinLength\n              }));\n              var r = new this.wavesurfer.Region(e, this.util, this.wavesurfer);\n              return this.list[r.id] = r, r.on(\"remove\", function () {\n                delete t.list[r.id];\n              }), r;\n            }\n          }, {\n            key: \"clear\",\n            value: function () {\n              var e = this;\n              Object.keys(this.list).forEach(function (t) {\n                e.list[t].remove();\n              });\n            }\n          }, {\n            key: \"enableDragSelection\",\n            value: function (e) {\n              var t = this;\n              this.disableDragSelection();\n\n              var r,\n                  i,\n                  n,\n                  a,\n                  s,\n                  o,\n                  l,\n                  h = e.slop || 2,\n                  u = this.wavesurfer.drawer.container,\n                  d = !1 !== e.scroll && this.wavesurfer.params.scrollParent,\n                  c = e.scrollSpeed || 1,\n                  v = e.scrollThreshold || 10,\n                  f = this.wavesurfer.getDuration(),\n                  g = 0,\n                  p = function e(r) {\n                if (a && o) {\n                  var s = t.wrapper.scrollLeft + c * o;\n                  t.wrapper.scrollLeft = s = Math.min(i, Math.max(0, s));\n                  var l = t.wavesurfer.drawer.handleEvent(r);\n                  a.update({\n                    start: Math.min(l * f, n * f),\n                    end: Math.max(l * f, n * f)\n                  }), s < i && s > 0 && window.requestAnimationFrame(function () {\n                    e(r);\n                  });\n                }\n              },\n                  m = function (e) {\n                e.touches && e.touches.length > 1 || (f = t.wavesurfer.getDuration(), s = e.targetTouches ? e.targetTouches[0].identifier : null, i = t.wrapper.scrollWidth - t.wrapper.clientWidth, l = t.util.withOrientation(t.wrapper.getBoundingClientRect(), t.vertical), r = !0, n = t.wavesurfer.drawer.handleEvent(e, !0), a = null, o = null);\n              };\n\n              this.wrapper.addEventListener(\"mousedown\", m), this.wrapper.addEventListener(\"touchstart\", m), this.on(\"disable-drag-selection\", function () {\n                t.wrapper.removeEventListener(\"touchstart\", m), t.wrapper.removeEventListener(\"mousedown\", m);\n              });\n\n              var w = function (e) {\n                e.touches && e.touches.length > 1 || (r = !1, g = 0, o = null, a && (t.util.preventClick(), a.fireEvent(\"update-end\", e), t.wavesurfer.fireEvent(\"region-update-end\", a, e)), a = null);\n              };\n\n              this.wrapper.addEventListener(\"mouseleave\", w), this.wrapper.addEventListener(\"mouseup\", w), this.wrapper.addEventListener(\"touchend\", w), document.body.addEventListener(\"mouseup\", w), document.body.addEventListener(\"touchend\", w), this.on(\"disable-drag-selection\", function () {\n                document.body.removeEventListener(\"mouseup\", w), document.body.removeEventListener(\"touchend\", w), t.wrapper.removeEventListener(\"touchend\", w), t.wrapper.removeEventListener(\"mouseup\", w), t.wrapper.removeEventListener(\"mouseleave\", w);\n              });\n\n              var b = function (i) {\n                if (r && !(++g <= h) && !(i.touches && i.touches.length > 1) && (!i.targetTouches || i.targetTouches[0].identifier == s) && (a || (a = t.add(e || {})))) {\n                  var c = t.wavesurfer.drawer.handleEvent(i),\n                      m = t.wavesurfer.regions.util.getRegionSnapToGridValue(n * f),\n                      w = t.wavesurfer.regions.util.getRegionSnapToGridValue(c * f);\n                  a.update({\n                    start: Math.min(w, m),\n                    end: Math.max(w, m)\n                  });\n                  var b = t.util.withOrientation(i, t.vertical);\n\n                  if (d && u.clientWidth < t.wrapper.scrollWidth) {\n                    var y = b.clientX - l.left;\n                    (o = y <= v ? -1 : y >= l.right - v ? 1 : null) && p(i);\n                  }\n                }\n              };\n\n              this.wrapper.addEventListener(\"mousemove\", b), this.wrapper.addEventListener(\"touchmove\", b), this.on(\"disable-drag-selection\", function () {\n                t.wrapper.removeEventListener(\"touchmove\", b), t.wrapper.removeEventListener(\"mousemove\", b);\n              }), this.wavesurfer.on(\"region-created\", function (e) {\n                t.regionsMinLength && (e.minLength = t.regionsMinLength);\n              });\n            }\n          }, {\n            key: \"disableDragSelection\",\n            value: function () {\n              this.fireEvent(\"disable-drag-selection\");\n            }\n          }, {\n            key: \"getCurrentRegion\",\n            value: function () {\n              var e = this,\n                  t = this.wavesurfer.getCurrentTime(),\n                  r = null;\n              return Object.keys(this.list).forEach(function (i) {\n                var n = e.list[i];\n                n.start <= t && n.end >= t && (!r || n.end - n.start < r.end - r.start) && (r = n);\n              }), r;\n            }\n          }, {\n            key: \"getRegionSnapToGridValue\",\n            value: function (e, t) {\n              if (t.snapToGridInterval) {\n                var r = t.snapToGridOffset || 0;\n                return Math.round((e - r) / t.snapToGridInterval) * t.snapToGridInterval + r;\n              }\n\n              return e;\n            }\n          }]) && o(t.prototype, r), n && o(t, n), e;\n        }();\n\n        t.default = l, e.exports = t.default;\n      },\n      638: (e, t) => {\n        function r(e, t) {\n          for (var r = 0; r < t.length; r++) {\n            var i = t[r];\n            i.enumerable = i.enumerable || !1, i.configurable = !0, \"value\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);\n          }\n        }\n\n        Object.defineProperty(t, \"__esModule\", {\n          value: !0\n        }), t.Region = void 0;\n\n        var i = function () {\n          function e(t, r, i) {\n            var n,\n                a = this;\n            !function (e, t) {\n              if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n            }(this, e), this.wavesurfer = i, this.wrapper = i.drawer.wrapper, this.util = i.util, this.style = this.util.style, this.regionsUtil = r, this.vertical = i.drawer.params.vertical, this.id = null == t.id ? i.util.getId() : t.id, this.start = Number(t.start) || 0, this.end = null == t.end ? this.start + 4 / this.wrapper.scrollWidth * this.wavesurfer.getDuration() : Number(t.end), this.resize = void 0 === t.resize || Boolean(t.resize), this.drag = void 0 === t.drag || Boolean(t.drag), this.isResizing = !1, this.isDragging = !1, this.loop = Boolean(t.loop), this.color = t.color || \"rgba(0, 0, 0, 0.1)\", this.handleStyle = t.handleStyle || {\n              left: {},\n              right: {}\n            }, this.handleLeftEl = null, this.handleRightEl = null, this.data = t.data || {}, this.attributes = t.attributes || {}, this.showTooltip = null === (n = t.showTooltip) || void 0 === n || n, this.maxLength = t.maxLength, this.minLength = t.minLength, this._onRedraw = function () {\n              return a.updateRender();\n            }, this.scroll = !1 !== t.scroll && i.params.scrollParent, this.scrollSpeed = t.scrollSpeed || 1, this.scrollThreshold = t.scrollThreshold || 10, this.preventContextMenu = void 0 !== t.preventContextMenu && Boolean(t.preventContextMenu);\n            var s = null == t.channelIdx ? -1 : parseInt(t.channelIdx);\n\n            if (this.regionHeight = \"100%\", this.marginTop = \"0px\", -1 !== s) {\n              var o = null != this.wavesurfer.backend.buffer ? this.wavesurfer.backend.buffer.numberOfChannels : -1;\n              o >= 0 && s < o && (this.regionHeight = Math.floor(1 / o * 100) + \"%\", this.marginTop = this.wavesurfer.getHeight() * s + \"px\");\n            }\n\n            this.formatTimeCallback = t.formatTimeCallback, this.edgeScrollWidth = t.edgeScrollWidth, this.bindInOut(), this.render(), this.wavesurfer.on(\"zoom\", this._onRedraw), this.wavesurfer.on(\"redraw\", this._onRedraw), this.wavesurfer.fireEvent(\"region-created\", this);\n          }\n\n          var t, i, n;\n          return t = e, (i = [{\n            key: \"update\",\n            value: function (e, t) {\n              null != e.start && (this.start = Number(e.start)), null != e.end && (this.end = Number(e.end)), null != e.loop && (this.loop = Boolean(e.loop)), null != e.color && (this.color = e.color), null != e.handleStyle && (this.handleStyle = e.handleStyle), null != e.data && (this.data = e.data), null != e.resize && (this.resize = Boolean(e.resize), this.updateHandlesResize(this.resize)), null != e.drag && (this.drag = Boolean(e.drag)), null != e.maxLength && (this.maxLength = Number(e.maxLength)), null != e.minLength && (this.minLength = Number(e.minLength)), null != e.attributes && (this.attributes = e.attributes), this.updateRender(), this.fireEvent(\"update\"), this.wavesurfer.fireEvent(\"region-updated\", this, t);\n            }\n          }, {\n            key: \"remove\",\n            value: function () {\n              this.element && (this.wrapper.removeChild(this.element.domElement), this.element = null, this.fireEvent(\"remove\"), this.wavesurfer.un(\"zoom\", this._onRedraw), this.wavesurfer.un(\"redraw\", this._onRedraw), this.wavesurfer.fireEvent(\"region-removed\", this));\n            }\n          }, {\n            key: \"play\",\n            value: function (e) {\n              var t = e || this.start;\n              this.wavesurfer.play(t, this.end), this.fireEvent(\"play\"), this.wavesurfer.fireEvent(\"region-play\", this);\n            }\n          }, {\n            key: \"playLoop\",\n            value: function (e) {\n              this.loop = !0, this.play(e);\n            }\n          }, {\n            key: \"setLoop\",\n            value: function (e) {\n              this.loop = e;\n            }\n          }, {\n            key: \"render\",\n            value: function () {\n              for (var e in this.element = this.util.withOrientation(this.wrapper.appendChild(document.createElement(\"region\")), this.vertical), this.element.className = \"wavesurfer-region\", this.showTooltip && (this.element.title = this.formatTime(this.start, this.end)), this.element.setAttribute(\"data-id\", this.id), this.attributes) this.element.setAttribute(\"data-region-\" + e, this.attributes[e]);\n\n              if (this.style(this.element, {\n                position: \"absolute\",\n                zIndex: 2,\n                height: this.regionHeight,\n                top: this.marginTop\n              }), this.resize) {\n                this.handleLeftEl = this.util.withOrientation(this.element.appendChild(document.createElement(\"handle\")), this.vertical), this.handleRightEl = this.util.withOrientation(this.element.appendChild(document.createElement(\"handle\")), this.vertical), this.handleLeftEl.className = \"wavesurfer-handle wavesurfer-handle-start\", this.handleRightEl.className = \"wavesurfer-handle wavesurfer-handle-end\";\n                var t = {\n                  cursor: this.vertical ? \"row-resize\" : \"col-resize\",\n                  position: \"absolute\",\n                  top: \"0px\",\n                  width: \"2px\",\n                  height: \"100%\",\n                  backgroundColor: \"rgba(0, 0, 0, 1)\"\n                },\n                    r = \"none\" !== this.handleStyle.left ? Object.assign({\n                  left: \"0px\"\n                }, t, this.handleStyle.left) : null,\n                    i = \"none\" !== this.handleStyle.right ? Object.assign({\n                  right: \"0px\"\n                }, t, this.handleStyle.right) : null;\n                r && this.style(this.handleLeftEl, r), i && this.style(this.handleRightEl, i);\n              }\n\n              this.updateRender(), this.bindEvents();\n            }\n          }, {\n            key: \"formatTime\",\n            value: function (e, t) {\n              return this.formatTimeCallback ? this.formatTimeCallback(e, t) : (e == t ? [e] : [e, t]).map(function (e) {\n                return [Math.floor(e % 3600 / 60), (\"00\" + Math.floor(e % 60)).slice(-2)].join(\":\");\n              }).join(\"-\");\n            }\n          }, {\n            key: \"getWidth\",\n            value: function () {\n              return this.wavesurfer.drawer.width / this.wavesurfer.params.pixelRatio;\n            }\n          }, {\n            key: \"updateRender\",\n            value: function () {\n              var e = this.wavesurfer.getDuration(),\n                  t = this.getWidth(),\n                  r = this.start,\n                  i = this.end;\n\n              if (r < 0 && (i -= r = 0), i > e && (r = e - ((i = e) - r)), null != this.minLength && (i = Math.max(r + this.minLength, i)), null != this.maxLength && (i = Math.min(r + this.maxLength, i)), null != this.element) {\n                var n = Math.round(r / e * t),\n                    a = Math.round(i / e * t) - n;\n\n                for (var s in this.style(this.element, {\n                  left: n + \"px\",\n                  width: a + \"px\",\n                  backgroundColor: this.color,\n                  cursor: this.drag ? \"move\" : \"default\"\n                }), this.attributes) this.element.setAttribute(\"data-region-\" + s, this.attributes[s]);\n\n                this.showTooltip && (this.element.title = this.formatTime(this.start, this.end));\n              }\n            }\n          }, {\n            key: \"bindInOut\",\n            value: function () {\n              var e = this;\n              this.firedIn = !1, this.firedOut = !1;\n\n              var t = function (t) {\n                var r = Math.round(10 * e.start) / 10,\n                    i = Math.round(10 * e.end) / 10;\n                t = Math.round(10 * t) / 10, !e.firedOut && e.firedIn && (r > t || i <= t) && (e.firedOut = !0, e.firedIn = !1, e.fireEvent(\"out\"), e.wavesurfer.fireEvent(\"region-out\", e)), !e.firedIn && r <= t && i > t && (e.firedIn = !0, e.firedOut = !1, e.fireEvent(\"in\"), e.wavesurfer.fireEvent(\"region-in\", e));\n              };\n\n              this.wavesurfer.backend.on(\"audioprocess\", t), this.on(\"remove\", function () {\n                e.wavesurfer.backend.un(\"audioprocess\", t);\n              }), this.on(\"out\", function () {\n                if (e.loop) {\n                  var t = e.wavesurfer.getCurrentTime();\n                  t >= e.start && t <= e.end && e.wavesurfer.play(e.start);\n                }\n              });\n            }\n          }, {\n            key: \"bindEvents\",\n            value: function () {\n              var e = this,\n                  t = this.preventContextMenu;\n              this.element.addEventListener(\"mouseenter\", function (t) {\n                e.fireEvent(\"mouseenter\", t), e.wavesurfer.fireEvent(\"region-mouseenter\", e, t);\n              }), this.element.addEventListener(\"mouseleave\", function (t) {\n                e.fireEvent(\"mouseleave\", t), e.wavesurfer.fireEvent(\"region-mouseleave\", e, t);\n              }), this.element.addEventListener(\"click\", function (t) {\n                t.preventDefault(), e.fireEvent(\"click\", t), e.wavesurfer.fireEvent(\"region-click\", e, t);\n              }), this.element.addEventListener(\"dblclick\", function (t) {\n                t.stopPropagation(), t.preventDefault(), e.fireEvent(\"dblclick\", t), e.wavesurfer.fireEvent(\"region-dblclick\", e, t);\n              }), this.element.addEventListener(\"contextmenu\", function (r) {\n                t && r.preventDefault(), e.fireEvent(\"contextmenu\", r), e.wavesurfer.fireEvent(\"region-contextmenu\", e, r);\n              }), (this.drag || this.resize) && this.bindDragEvents();\n            }\n          }, {\n            key: \"bindDragEvents\",\n            value: function () {\n              var e,\n                  t,\n                  r,\n                  i,\n                  n,\n                  a,\n                  s,\n                  o,\n                  l,\n                  h = this,\n                  u = this.wavesurfer.drawer.container,\n                  d = this.scrollSpeed,\n                  c = (this.scrollThreshold, !1),\n                  v = function t(u) {\n                var c = h.util.withOrientation(u, h.vertical),\n                    v = h.wavesurfer.getDuration();\n\n                if (a && (r || n)) {\n                  var f = c.clientX,\n                      g = 0,\n                      p = 0,\n                      m = 0,\n                      w = h.regionsUtil.getRegionSnapToGridValue(h.wavesurfer.drawer.handleEvent(u) * v);\n                  if (r) -1 === a ? (p = o * h.wavesurfer.params.minPxPerSec, g = f - s.left) : (p = l * h.wavesurfer.params.minPxPerSec, g = s.right - f);else {\n                    var b = h.minLength;\n                    b || (b = 0), \"start\" === n ? (w > h.end - b && (w = h.end - b, m = d * a), w < 0 && (w = 0)) : \"end\" === n && (w < h.start + b && (w = h.start + b, m = d * a), w > v && (w = v));\n                  }\n                  var y = h.wrapper.scrollLeft;\n\n                  if (-1 === a) {\n                    if (0 === Math.round(y)) return;\n                    if (Math.round(y - p + g) <= 0) return;\n                  } else {\n                    if (Math.round(y) === i) return;\n                    if (Math.round(y + p - g) >= i) return;\n                  }\n\n                  var E = y - m + d * a;\n\n                  if (-1 === a) {\n                    var L = Math.max(0 + p - g, E);\n                    h.wrapper.scrollLeft = E = L;\n                  } else {\n                    var k = Math.min(i - p + g, E);\n                    h.wrapper.scrollLeft = E = k;\n                  }\n\n                  var R = w - e;\n                  e = w, r ? h.onDrag(R) : h.onResize(R, n), window.requestAnimationFrame(function () {\n                    t(u);\n                  });\n                }\n              },\n                  f = function (a) {\n                var u = h.wavesurfer.getDuration();\n                a.touches && a.touches.length > 1 || (t = a.targetTouches ? a.targetTouches[0].identifier : null, (h.drag || h.resize) && a.stopPropagation(), e = h.regionsUtil.getRegionSnapToGridValue(h.wavesurfer.drawer.handleEvent(a, !0) * u), o = e - h.start, l = h.end - e, i = h.wrapper.scrollWidth - h.wrapper.clientWidth, s = h.util.withOrientation(h.wrapper.getBoundingClientRect(), h.vertical), h.isResizing = !1, h.isDragging = !1, \"handle\" === a.target.tagName.toLowerCase() ? (h.isResizing = !0, n = a.target.classList.contains(\"wavesurfer-handle-start\") ? \"start\" : \"end\") : (h.isDragging = !0, r = !0, n = !1));\n              },\n                  g = function (e) {\n                e.touches && e.touches.length > 1 || ((r || n) && (h.isDragging = !1, h.isResizing = !1, r = !1, a = null, n = !1), c && (c = !1, h.util.preventClick(), h.fireEvent(\"update-end\", e), h.wavesurfer.fireEvent(\"region-update-end\", h, e)));\n              },\n                  p = function (i) {\n                var d = h.wavesurfer.getDuration(),\n                    f = h.util.withOrientation(i, h.vertical);\n\n                if (!(i.touches && i.touches.length > 1) && (!i.targetTouches || i.targetTouches[0].identifier == t) && (r || n)) {\n                  var g = h.regionsUtil.getRegionSnapToGridValue(h.wavesurfer.drawer.handleEvent(i) * d);\n\n                  if (r) {\n                    var p = h.wavesurfer.getDuration();\n                    g > p - l && (g = p - l), g - o < 0 && (g = o);\n                  }\n\n                  if (n) {\n                    var m = h.minLength;\n                    m || (m = 0), \"start\" === n ? (g > h.end - m && (g = h.end - m), g < 0 && (g = 0)) : \"end\" === n && (g < h.start + m && (g = h.start + m), g > d && (g = d));\n                  }\n\n                  var w = g - e;\n\n                  if (e = g, h.drag && r && (c = c || !!w, h.onDrag(w)), h.resize && n && (c = c || !!w, h.onResize(w, n)), h.scroll && u.clientWidth < h.wrapper.scrollWidth) {\n                    var b = f.clientX;\n                    (a = b < s.left + h.edgeScrollWidth ? -1 : b > s.right - h.edgeScrollWidth ? 1 : null) && v(i);\n                  }\n                }\n              };\n\n              this.element.addEventListener(\"mousedown\", f), this.element.addEventListener(\"touchstart\", f), document.body.addEventListener(\"mousemove\", p), document.body.addEventListener(\"touchmove\", p, {\n                passive: !1\n              }), document.addEventListener(\"mouseup\", g), document.body.addEventListener(\"touchend\", g), this.on(\"remove\", function () {\n                document.removeEventListener(\"mouseup\", g), document.body.removeEventListener(\"touchend\", g), document.body.removeEventListener(\"mousemove\", p), document.body.removeEventListener(\"touchmove\", p);\n              }), this.wavesurfer.on(\"destroy\", function () {\n                document.removeEventListener(\"mouseup\", g), document.body.removeEventListener(\"touchend\", g);\n              });\n            }\n          }, {\n            key: \"onDrag\",\n            value: function (e) {\n              var t = this.wavesurfer.getDuration();\n              this.end + e > t && (e = t - this.end), this.start + e < 0 && (e = -1 * this.start);\n              var r = {\n                direction: this._getDragDirection(e),\n                action: \"drag\"\n              };\n              this.update({\n                start: this.start + e,\n                end: this.end + e\n              }, r);\n            }\n          }, {\n            key: \"_getDragDirection\",\n            value: function (e) {\n              return e < 0 ? \"left\" : e > 0 ? \"right\" : null;\n            }\n          }, {\n            key: \"onResize\",\n            value: function (e, t) {\n              var r = this.wavesurfer.getDuration(),\n                  i = {\n                action: \"resize\",\n                direction: \"start\" === t ? \"right\" : \"left\"\n              };\n              \"start\" === t ? (e > 0 && this.end - (this.start + e) < this.minLength && (e = this.end - this.minLength - this.start), e < 0 && this.start + e < 0 && (e = -1 * this.start), this.update({\n                start: Math.min(this.start + e, this.end),\n                end: Math.max(this.start + e, this.end)\n              }, i)) : (e < 0 && this.end + e - this.start < this.minLength && (e = this.start + this.minLength - this.end), e > 0 && this.end + e > r && (e = r - this.end), this.update({\n                start: Math.min(this.end + e, this.start),\n                end: Math.max(this.end + e, this.start)\n              }, i));\n            }\n          }, {\n            key: \"updateHandlesResize\",\n            value: function (e) {\n              var t;\n              t = e ? this.vertical ? \"row-resize\" : \"col-resize\" : \"auto\", this.handleLeftEl && this.style(this.handleLeftEl, {\n                cursor: t\n              }), this.handleRightEl && this.style(this.handleRightEl, {\n                cursor: t\n              });\n            }\n          }]) && r(t.prototype, i), n && r(t, n), e;\n        }();\n\n        t.Region = i;\n      }\n    },\n        t = {};\n    return function r(i) {\n      var n = t[i];\n      if (void 0 !== n) return n.exports;\n      var a = t[i] = {\n        exports: {}\n      };\n      return e[i](a, a.exports, r), a.exports;\n    }(23);\n  })();\n});","map":{"version":3,"sources":["webpack://WaveSurfer.[name]/webpack/universalModuleDefinition","webpack://WaveSurfer.[name]/src/plugin/regions/index.js","webpack://WaveSurfer.[name]/src/plugin/regions/region.js","webpack://WaveSurfer.[name]/webpack/bootstrap","webpack://WaveSurfer.[name]/webpack/startup"],"names":["root","factory","exports","module","define","amd","self","RegionsPlugin","params","name","deferInit","staticProps","addRegion","options","this","initialisedPluginList","regions","initPlugin","add","clearRegions","clear","enableDragSelection","disableDragSelection","instance","ws","wavesurfer","util","getRegionSnapToGridValue","value","maxRegions","regionsMinLength","Object","getOwnPropertyNames","Observer","prototype","forEach","Region","key","_onBackendCreated","wrapper","drawer","orientation","region","edgeScrollWidth","clientWidth","list","_onReady","vertical","dragSelection","keys","id","updateRender","isReady","once","un","length","wouldExceedMaxRegions","minLength","on","remove","slop","container","scroll","scrollParent","scrollSpeed","scrollThreshold","drag","duration","getDuration","maxScroll","start","touchId","pxMove","scrollDirection","wrapperRect","edgeScroll","scrollLeft","Math","min","max","end","handleEvent","e","update","window","requestAnimationFrame","eventDown","touches","targetTouches","identifier","scrollWidth","withOrientation","getBoundingClientRect","addEventListener","removeEventListener","eventUp","preventClick","fireEvent","document","body","eventMove","event","startUpdate","endUpdate","orientedEvent","x","clientX","left","right","time","getCurrentTime","cur","snapToGridInterval","offset","snapToGridOffset","round","regionsUtils","style","regionsUtil","getId","Number","resize","undefined","Boolean","isResizing","isDragging","loop","color","handleStyle","handleLeftEl","handleRightEl","data","attributes","showTooltip","maxLength","_onRedraw","preventContextMenu","channelIdx","parseInt","regionHeight","marginTop","channelCount","backend","buffer","numberOfChannels","floor","getHeight","formatTimeCallback","bindInOut","render","eventParams","updateHandlesResize","element","removeChild","domElement","s","play","appendChild","createElement","className","title","formatTime","setAttribute","attrname","position","zIndex","height","top","css","cursor","width","backgroundColor","handleLeftCss","assign","handleRightCss","bindEvents","map","slice","join","pixelRatio","dur","getWidth","startLimited","endLimited","regionWidth","firedIn","firedOut","onProcess","realTime","preventDefault","stopPropagation","bindDragEvents","startTime","updated","regionLeftHalfTime","regionRightHalfTime","distanceBetweenCursorAndWrapperEdge","regionHalfTimeWidth","adjustment","minPxPerSec","wrapperScrollLeft","calculatedLeft","calculatedRight","delta","onDrag","onResize","onDown","target","tagName","toLowerCase","classList","contains","onUp","onMove","maxEnd","passive","direction","_getDragDirection","action","cursorStyle","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"mappings":";;;;;CAAA,UAA2CA,CAA3C,EAAiDC,CAAjD,EAAiDA;AAC1B,cAAA,OAAZC,OAAY,IAA8B,YAAA,OAAXC,MAAnB,GACrBA,MAAAA,CAAOD,OAAPC,GAAiBF,CAAAA,EADI,GAEI,cAAA,OAAXG,MAAW,IAAcA,MAAAA,CAAOC,GAArB,GACzBD,MAAAA,CAAO,YAAPA,EAAqB,EAArBA,EAAyBH,CAAzBG,CADyB,GAEC,YAAA,OAAZF,OAAY,GAC1BA,OAAAA,CAAoB,UAApBA,GAAwBD,CAAAA,EADE,IAG1BD,CAAAA,CAAiB,UAAjBA,GAAqBA,CAAAA,CAAiB,UAAjBA,IAAsB,EAA3CA,EAA+CA,CAAAA,CAAiB,UAAjBA,CAA4B,OAA5BA,GAAgCC,CAAAA,EAHrD,CAJL;AADvB,CAAA,CASGK,IATH,EASS,YAAA;AACT,SAAA,CAAA,MAAA;;;;;;;;ACyBA,YAAA,CAAA,GAAA,CAAA,CAAA,GAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAgCqBC,CAAAA,GAAAA,YAAAA;AA0CjB,mBAAA,CAAA,CAAYC,CAAZ,EAAoBgB,CAApB,EAAoBA;AAAI,gBAAA,CAAA,GAAA,IAAA;AAAA,a;;AAAA,a,CAAA,I,EAAA,C,CAAA,EACpBV,KAAKN,MAALM,GAAcN,CADM,EAEpBM,KAAKW,UAALX,GAAkBU,CAFE,EAGpBV,KAAKY,IAALZ,GAAAA,CAAAA,CAAAA,CAAAA,CAAAA,EAAAA,EACOU,CAAAA,CAAGE,IADVZ,CAAAA,EAAAA,EAAAA,EAAAA;AAEIa,cAAAA,wBAAAA,EAA0B,UAAA,CAAA,EAAA;AACtB,uBAAO,CAAA,CAAKA,wBAAL,CAA8BC,CAA9B,EAAqCpB,CAArC,CAAP;AAA4CA;AAHpDM,aAAAA,CAHoB,EASpBA,KAAKe,UAALf,GAAkBN,CAAAA,CAAOqB,UATL,EAUpBf,KAAKgB,gBAALhB,GAAwBN,CAAAA,CAAOsB,gBAAPtB,IAA2B,IAV/B,EAaUuB,MAAAA,CAAOC,mBAAPD,CAC1BjB,KAAKY,IAALZ,CAAUmB,QAAVnB,CAAmBoB,SADOH,EAGRI,OAHQJ,CAGA,UAAA,CAAA,EAAA;AAC1BK,cAAAA,CAAAA,CAAAA,MAAAA,CAAOF,SAAPE,CAAiBC,CAAjBD,IAAwB,CAAA,CAAKV,IAAL,CAAUO,QAAV,CAAmBC,SAAnB,CAA6BG,CAA7B,CAAxBD;AAAqDC,aAJ3BN,CAbV,EAmBpBjB,KAAKW,UAALX,CAAgBsB,MAAhBtB,GAAyBsB,CAAAA,CAAAA,MAnBL;AAwBpBtB,iBAAKwB,iBAALxB,GAAyB,YAAA;AACrB,cAAA,CAAA,CAAKyB,OAAL,GAAe,CAAA,CAAKd,UAAL,CAAgBe,MAAhB,CAAuBD,OAAtC,EACA,CAAA,CAAKE,WAAL,GAAmB,CAAA,CAAKhB,UAAL,CAAgBe,MAAhB,CAAuBC,WAD1C,EAEI,CAAA,CAAKjC,MAAL,CAAYQ,OAAZ,IACA,CAAA,CAAKR,MAAL,CAAYQ,OAAZ,CAAoBmB,OAApB,CAA4B,UAAA,CAAA,EAAA;AACxBO,gBAAAA,CAAAA,CAAOC,eAAPD,GAAyB,CAAA,CAAKlC,MAAL,CAAYmC,eAAZ,IANP,MAOd,CAAA,CAAKJ,OAAL,CAAaK,WADjBF,EAEA,CAAA,CAAKxB,GAAL,CAASwB,CAAT,CAFAA;AAESA,eAHb,CAHJ;AAMiBA,aAPrB5B,EAaAA,KAAK+B,IAAL/B,GAAY,EAbZA,EAcAA,KAAKgC,QAALhC,GAAgB,YAAA;AACZ,cAAA,CAAA,CAAKyB,OAAL,GAAe,CAAA,CAAKd,UAAL,CAAgBe,MAAhB,CAAuBD,OAAtC,EACA,CAAA,CAAKQ,QAAL,GAAgB,CAAA,CAAKtB,UAAL,CAAgBe,MAAhB,CAAuBhC,MAAvB,CAA8BuC,QAD9C,EAEI,CAAA,CAAKvC,MAAL,CAAYwC,aAAZ,IACA,CAAA,CAAK3B,mBAAL,CAAyB,CAAA,CAAKb,MAA9B,CAHJ,EAKAuB,MAAAA,CAAOkB,IAAPlB,CAAY,CAAA,CAAKc,IAAjBd,EAAuBI,OAAvBJ,CAA+B,UAAA,CAAA,EAAA;AAC3B,gBAAA,CAAA,CAAKc,IAAL,CAAUK,CAAV,EAAcC,YAAd;AAAcA,eADlBpB,CALA;AAMkBoB,aArBtBrC;;;;;;mBAxDJ,UAAcN,CAAd,EAAcA;AACV,qBAAO;AACHC,gBAAAA,IAAAA,EAAM,SADH;AAEHC,gBAAAA,SAAAA,EAAAA,EAAAA,CAAWF,CAAXE,IAAWF,CAAUA,CAAAA,CAAOE,SAA5BA,KAAwCF,CAAAA,CAAOE,SAF5C;AAGHF,gBAAAA,MAAAA,EAAQA,CAHL;AAIHG,gBAAAA,WAAAA,EAAa;AACTC,kBAAAA,SAAAA,EADS,UACCC,CADD,EACCA;AAIN,2BAHKC,KAAKC,qBAALD,CAA2BE,OAA3BF,IACDA,KAAKG,UAALH,CAAgB,SAAhBA,CADCA,EAGEA,KAAKE,OAALF,CAAaI,GAAbJ,CAAiBD,CAAjBC,CAAP;AAAwBD,mBALnB;AAQTM,kBAAAA,YAAAA,EARS,YAAA;AASLL,yBAAKE,OAALF,IAAgBA,KAAKE,OAALF,CAAaM,KAAbN,EAAhBA;AAA6BM,mBATxB;AAYTC,kBAAAA,mBAAAA,EAZS,UAYWR,CAZX,EAYWA;AACXC,yBAAKC,qBAALD,CAA2BE,OAA3BF,IACDA,KAAKG,UAALH,CAAgB,SAAhBA,CADCA,EAGLA,KAAKE,OAALF,CAAaO,mBAAbP,CAAiCD,CAAjCC,CAHKA;AAG4BD,mBAhB5B;AAmBTS,kBAAAA,oBAAAA,EAnBS,YAAA;AAoBLR,yBAAKE,OAALF,CAAaQ,oBAAbR;AAAaQ;AApBR,iBAJV;AA2BHC,gBAAAA,QAAAA,EAAUhB;AA3BP,eAAP;AA2BcA;cAAAA,C;;mBAsDlB,YAAA;AAEQO,mBAAKW,UAALX,CAAgBsC,OAAhBtC,IACAA,KAAKwB,iBAALxB,IACAA,KAAKgC,QAALhC,EAFAA,KAIAA,KAAKW,UAALX,CAAgBuC,IAAhBvC,CAAqB,OAArBA,EAA8BA,KAAKgC,QAAnChC,GACAA,KAAKW,UAALX,CAAgBuC,IAAhBvC,CAAqB,iBAArBA,EAAwCA,KAAKwB,iBAA7CxB,CALAA;AAK6CwB;;;mBAIrD,YAAA;AACIxB,mBAAKW,UAALX,CAAgBwC,EAAhBxC,CAAmB,OAAnBA,EAA4BA,KAAKgC,QAAjChC,GACAA,KAAKW,UAALX,CAAgBwC,EAAhBxC,CAAmB,iBAAnBA,EAAsCA,KAAKwB,iBAA3CxB,CADAA,EAEAA,KAAKQ,oBAALR,EAFAA,EAGAA,KAAKM,KAALN,EAHAA;AAGKM;;;mBAQT,YAAA;AACI,qBACIN,KAAKe,UAALf,IAAmBiB,MAAAA,CAAOkB,IAAPlB,CAAYjB,KAAK+B,IAAjBd,EAAuBwB,MAAvBxB,IAAiCjB,KAAKe,UAD7D;AAC6DA;;;mBAUjE,UAAIrB,CAAJ,EAAIA;AAAQ,kBAAA,CAAA,GAAA,IAAA;AACR,kBAAIM,KAAK0C,qBAAL1C,EAAJ,EACI,OAAO,IAAP;AAAO,eAGNN,CAAAA,CAAOiD,SAHD,IAGc3C,KAAKgB,gBAHnB,KAIPtB,CAAAA,GAAS,CAAA,CAAH,CAAA,CAAA,EAAA,EAAOA,CAAP,CAAG,EAAH,EAAG,EAAH;AAAeiD,gBAAAA,SAAAA,EAAW3C,KAAKgB;AAA/B,eAAG,CAJF;AAOX,kBAAMY,CAAAA,GAAS,IAAI5B,KAAKW,UAALX,CAAgBsB,MAApB,CAA2B5B,CAA3B,EAAmCM,KAAKY,IAAxC,EAA8CZ,KAAKW,UAAnD,CAAf;AAQA,qBANAX,KAAK+B,IAAL/B,CAAU4B,CAAAA,CAAOQ,EAAjBpC,IAAuB4B,CAAvB5B,EAEA4B,CAAAA,CAAOgB,EAAPhB,CAAU,QAAVA,EAAoB,YAAA;AAAA,uBACT,CAAA,CAAKG,IAAL,CAAUH,CAAAA,CAAOQ,EAAjB,CADS;AACQA,eAD5BR,CAFA5B,EAMO4B,CAAP;AAAOA;;;mBAMX,YAAA;AAAQ,kBAAA,CAAA,GAAA,IAAA;AACJX,cAAAA,MAAAA,CAAOkB,IAAPlB,CAAYjB,KAAK+B,IAAjBd,EAAuBI,OAAvBJ,CAA+B,UAAA,CAAA,EAAA;AAC3B,gBAAA,CAAA,CAAKc,IAAL,CAAUK,CAAV,EAAcS,MAAd;AAAcA,eADlB5B;AACkB4B;;;mBAItB,UAAoBnD,CAApB,EAAoBA;AAAQ,kBAAA,CAAA,GAAA,IAAA;AACxBM,mBAAKQ,oBAALR;;AAEA,kBAMIoD,CANJ;AAAA,kBAQIG,CARJ;AAAA,kBASIC,CATJ;AAAA,kBAUI5B,CAVJ;AAAA,kBAWI6B,CAXJ;AAAA,kBAaIE,CAbJ;AAAA,kBAcIC,CAdJ;AAAA,kBAAMd,CAAAA,GAAOpD,CAAAA,CAAOoD,IAAPpD,IAAe,CAA5B;AAAA,kBACMqD,CAAAA,GAAY/C,KAAKW,UAALX,CAAgB0B,MAAhB1B,CAAuB+C,SADzC;AAAA,kBAEMC,CAAAA,GAAAA,CACgB,CADhBA,KACFtD,CAAAA,CAAOsD,MADLA,IACyBhD,KAAKW,UAALX,CAAgBN,MAAhBM,CAAuBiD,YAHtD;AAAA,kBAIMC,CAAAA,GAAcxD,CAAAA,CAAOwD,WAAPxD,IAAsB,CAJ1C;AAAA,kBAKMyD,CAAAA,GAAkBzD,CAAAA,CAAOyD,eAAPzD,IAA0B,EALlD;AAAA,kBAOI2D,CAAAA,GAAWrD,KAAKW,UAALX,CAAgBsD,WAAhBtD,EAPf;AAAA,kBAYI0D,CAAAA,GAAS,CAZb;AAAA,kBAiBMG,CAAAA,GAAa,SAAbA,CAAa,CAAA,CAAA,EAAA;AACf,oBAAKjC,CAAAA,IAAW+B,CAAhB,EAAA;AAKA,sBAAIG,CAAAA,GACA,CAAA,CAAKrC,OAAL,CAAaqC,UAAb,GAA0BZ,CAAAA,GAAcS,CAD5C;AAEA,kBAAA,CAAA,CAAKlC,OAAL,CAAaqC,UAAb,GAA0BA,CAAAA,GAAaC,IAAAA,CAAKC,GAALD,CACnCR,CADmCQ,EAEnCA,IAAAA,CAAKE,GAALF,CAAS,CAATA,EAAYD,CAAZC,CAFmCA,CAAvC;AAMA,sBAAMG,CAAAA,GAAM,CAAA,CAAKvD,UAAL,CAAgBe,MAAhB,CAAuByC,WAAvB,CAAmCC,CAAnC,CAAZ;AACAxC,kBAAAA,CAAAA,CAAOyC,MAAPzC,CAAc;AACV4B,oBAAAA,KAAAA,EAAOO,IAAAA,CAAKC,GAALD,CAASG,CAAAA,GAAMb,CAAfU,EAAyBP,CAAAA,GAAQH,CAAjCU,CADG;AAEVG,oBAAAA,GAAAA,EAAKH,IAAAA,CAAKE,GAALF,CAASG,CAAAA,GAAMb,CAAfU,EAAyBP,CAAAA,GAAQH,CAAjCU;AAFK,mBAAdnC,GAMIkC,CAAAA,GAAaP,CAAbO,IAA0BA,CAAAA,GAAa,CAAvCA,IACAQ,MAAAA,CAAOC,qBAAPD,CAA6B,YAAA;AACzBT,oBAAAA,CAAAA,CAAWO,CAAXP,CAAAA;AAAWO,mBADfE,CAPJ1C;AAQmBwC;AAAAA,eAxCvB;AAAA,kBA6CMI,CAAAA,GAAY,UAAA,CAAA,EAAA;AACVJ,gBAAAA,CAAAA,CAAEK,OAAFL,IAAaA,CAAAA,CAAEK,OAAFL,CAAU3B,MAAV2B,GAAmB,CAAhCA,KAGJf,CAAAA,GAAW,CAAA,CAAK1C,UAAL,CAAgB2C,WAAhB,EAAXD,EACAI,CAAAA,GAAUW,CAAAA,CAAEM,aAAFN,GAAkBA,CAAAA,CAAEM,aAAFN,CAAgB,CAAhBA,EAAmBO,UAArCP,GAAkD,IAD5Df,EAIAE,CAAAA,GAAY,CAAA,CAAK9B,OAAL,CAAamD,WAAb,GACR,CAAA,CAAKnD,OAAL,CAAaK,WALjBuB,EAMAO,CAAAA,GAAc,CAAA,CAAKhD,IAAL,CAAUiE,eAAV,CACV,CAAA,CAAKpD,OAAL,CAAaqD,qBAAb,EADU,EAEV,CAAA,CAAK7C,QAFK,CANdoB,EAWAD,CAAAA,GAAAA,CAAO,CAXPC,EAYAG,CAAAA,GAAQ,CAAA,CAAK7C,UAAL,CAAgBe,MAAhB,CAAuByC,WAAvB,CAAmCC,CAAnC,EAAmCA,CAAG,CAAtC,CAZRf,EAaAzB,CAAAA,GAAS,IAbTyB,EAcAM,CAAAA,GAAkB,IAjBdS;AAiBc,eA/DtB;;AAiEApE,mBAAKyB,OAALzB,CAAa+E,gBAAb/E,CAA8B,WAA9BA,EAA2CwE,CAA3CxE,GACAA,KAAKyB,OAALzB,CAAa+E,gBAAb/E,CAA8B,YAA9BA,EAA4CwE,CAA5CxE,CADAA,EAEAA,KAAK4C,EAAL5C,CAAQ,wBAARA,EAAkC,YAAA;AAC9B,gBAAA,CAAA,CAAKyB,OAAL,CAAauD,mBAAb,CAAiC,YAAjC,EAA+CR,CAA/C,GACA,CAAA,CAAK/C,OAAL,CAAauD,mBAAb,CAAiC,WAAjC,EAA8CR,CAA9C,CADA;AAC8CA,eAFlDxE,CAFAA;;AAOA,kBAAMiF,CAAAA,GAAU,UAAA,CAAA,EAAA;AACRb,gBAAAA,CAAAA,CAAEK,OAAFL,IAAaA,CAAAA,CAAEK,OAAFL,CAAU3B,MAAV2B,GAAmB,CAAhCA,KAIJhB,CAAAA,GAAAA,CAAO,CAAPA,EACAM,CAAAA,GAAS,CADTN,EAEAO,CAAAA,GAAkB,IAFlBP,EAIIxB,CAAAA,KACA,CAAA,CAAKhB,IAAL,CAAUsE,YAAV,IACAtD,CAAAA,CAAOuD,SAAPvD,CAAiB,YAAjBA,EAA+BwC,CAA/BxC,CADA,EAEA,CAAA,CAAKjB,UAAL,CAAgBwE,SAAhB,CAA0B,mBAA1B,EAA+CvD,CAA/C,EAAuDwC,CAAvD,CAHAxC,CAJJwB,EAUAxB,CAAAA,GAAS,IAdLwC;AAcK,eAfb;;AAiBApE,mBAAKyB,OAALzB,CAAa+E,gBAAb/E,CAA8B,YAA9BA,EAA4CiF,CAA5CjF,GACAA,KAAKyB,OAALzB,CAAa+E,gBAAb/E,CAA8B,SAA9BA,EAAyCiF,CAAzCjF,CADAA,EAEAA,KAAKyB,OAALzB,CAAa+E,gBAAb/E,CAA8B,UAA9BA,EAA0CiF,CAA1CjF,CAFAA,EAIAoF,QAAAA,CAASC,IAATD,CAAcL,gBAAdK,CAA+B,SAA/BA,EAA0CH,CAA1CG,CAJApF,EAKAoF,QAAAA,CAASC,IAATD,CAAcL,gBAAdK,CAA+B,UAA/BA,EAA2CH,CAA3CG,CALApF,EAMAA,KAAK4C,EAAL5C,CAAQ,wBAARA,EAAkC,YAAA;AAC9BoF,gBAAAA,QAAAA,CAASC,IAATD,CAAcJ,mBAAdI,CAAkC,SAAlCA,EAA6CH,CAA7CG,GACAA,QAAAA,CAASC,IAATD,CAAcJ,mBAAdI,CAAkC,UAAlCA,EAA8CH,CAA9CG,CADAA,EAEA,CAAA,CAAK3D,OAAL,CAAauD,mBAAb,CAAiC,UAAjC,EAA6CC,CAA7C,CAFAG,EAGA,CAAA,CAAK3D,OAAL,CAAauD,mBAAb,CAAiC,SAAjC,EAA4CC,CAA5C,CAHAG,EAIA,CAAA,CAAK3D,OAAL,CAAauD,mBAAb,CAAiC,YAAjC,EAA+CC,CAA/C,CAJAG;AAI+CH,eALnDjF,CANAA;;AAcA,kBAAMsF,CAAAA,GAAY,UAAA,CAAA,EAAA;AACd,oBAAKlC,CAAAA,IAAAA,EAAAA,EAGCM,CAHDN,IAGWN,CAHXM,CAAAA,IAGWN,EAIZyC,CAAAA,CAAMd,OAANc,IAAiBA,CAAAA,CAAMd,OAANc,CAAc9C,MAAd8C,GAAuB,CAJ5BzC,CAHXM,KAOuC,CAGxCmC,CAAAA,CAAMb,aAHkC,IAGjBa,CAAAA,CAAMb,aAANa,CAAoB,CAApBA,EAAuBZ,UAAvBY,IAAqC9B,CAV3DL,MAeAxB,CAAAA,KACDA,CAAAA,GAAS,CAAA,CAAKxB,GAAL,CAASV,CAAAA,IAAU,EAAnB,CADRkC,CAfAwB,CAAL,EAeA;AAOA,sBAAMc,CAAAA,GAAM,CAAA,CAAKvD,UAAL,CAAgBe,MAAhB,CAAuByC,WAAvB,CAAmCoB,CAAnC,CAAZ;AAAA,sBACMC,CAAAA,GAAc,CAAA,CAAK7E,UAAL,CAAgBT,OAAhB,CAAwBU,IAAxB,CAA6BC,wBAA7B,CAChB2C,CAAAA,GAAQH,CADQ,CADpB;AAAA,sBAIMoC,CAAAA,GAAY,CAAA,CAAK9E,UAAL,CAAgBT,OAAhB,CAAwBU,IAAxB,CAA6BC,wBAA7B,CACdqD,CAAAA,GAAMb,CADQ,CAJlB;AAOAzB,kBAAAA,CAAAA,CAAOyC,MAAPzC,CAAc;AACV4B,oBAAAA,KAAAA,EAAOO,IAAAA,CAAKC,GAALD,CAAS0B,CAAT1B,EAAoByB,CAApBzB,CADG;AAEVG,oBAAAA,GAAAA,EAAKH,IAAAA,CAAKE,GAALF,CAAS0B,CAAT1B,EAAoByB,CAApBzB;AAFK,mBAAdnC;AAKA,sBAAI8D,CAAAA,GAAgB,CAAA,CAAK9E,IAAL,CAAUiE,eAAV,CAA0BU,CAA1B,EAAiC,CAAA,CAAKtD,QAAtC,CAApB;;AAGA,sBAAIe,CAAAA,IAAUD,CAAAA,CAAUjB,WAAViB,GAAwB,CAAA,CAAKtB,OAAL,CAAamD,WAAnD,EAAgE;AAE5D,wBAAMe,CAAAA,GAAID,CAAAA,CAAcE,OAAdF,GAAwB9B,CAAAA,CAAYiC,IAA9C;AAA8CA,qBAE1ClC,CAAAA,GADAgC,CAAAA,IAAKxC,CAALwC,GAAKxC,CACc,CADnBwC,GAEOA,CAAAA,IAAK/B,CAAAA,CAAYkC,KAAZlC,GAAoBT,CAAzBwC,GACW,CADXA,GAGW,IANwBE,KAQ3BhC,CAAAA,CAAW0B,CAAX1B,CAR2BgC;AAQhBN;AAAAA;AAAAA,eAhDtC;;AAmDAvF,mBAAKyB,OAALzB,CAAa+E,gBAAb/E,CAA8B,WAA9BA,EAA2CsF,CAA3CtF,GACAA,KAAKyB,OAALzB,CAAa+E,gBAAb/E,CAA8B,WAA9BA,EAA2CsF,CAA3CtF,CADAA,EAEAA,KAAK4C,EAAL5C,CAAQ,wBAARA,EAAkC,YAAA;AAC9B,gBAAA,CAAA,CAAKyB,OAAL,CAAauD,mBAAb,CAAiC,WAAjC,EAA8CM,CAA9C,GACA,CAAA,CAAK7D,OAAL,CAAauD,mBAAb,CAAiC,WAAjC,EAA8CM,CAA9C,CADA;AAC8CA,eAFlDtF,CAFAA,EAOAA,KAAKW,UAALX,CAAgB4C,EAAhB5C,CAAmB,gBAAnBA,EAAqC,UAAA,CAAA,EAAA;AAC7B,gBAAA,CAAA,CAAKgB,gBAAL,KACAY,CAAAA,CAAOe,SAAPf,GAAmB,CAAA,CAAKZ,gBADxB;AACwBA,eAFhChB,CAPAA;AASgCgB;;;mBAKpC,YAAA;AACIhB,mBAAKmF,SAALnF,CAAe,wBAAfA;AAAe;;;mBAWnB,YAAA;AAAmB,kBAAA,CAAA,GAAA,IAAA;AAAA,kBACT+F,CAAAA,GAAO/F,KAAKW,UAALX,CAAgBgG,cAAhBhG,EADE;AAAA,kBAEXgE,CAAAA,GAAM,IAFK;AAYf,qBATA/C,MAAAA,CAAOkB,IAAPlB,CAAYjB,KAAK+B,IAAjBd,EAAuBI,OAAvBJ,CAA+B,UAAA,CAAA,EAAA;AAC3B,oBAAMgF,CAAAA,GAAM,CAAA,CAAKlE,IAAL,CAAUK,CAAV,CAAZ;AACI6D,gBAAAA,CAAAA,CAAIzC,KAAJyC,IAAaF,CAAbE,IAAqBA,CAAAA,CAAI/B,GAAJ+B,IAAWF,CAAhCE,KAAgCF,CAC3B/B,CAD2B+B,IACpBE,CAAAA,CAAI/B,GAAJ+B,GAAUA,CAAAA,CAAIzC,KAAdyC,GAAsBjC,CAAAA,CAAIE,GAAJF,GAAUA,CAAAA,CAAIR,KADhDyC,MAEIjC,CAAAA,GAAMiC,CAFVA;AAEUA,eAJlBhF,GASO+C,CAAP;AAAOA;;;mBAcX,UAAyBlD,CAAzB,EAAgCpB,CAAhC,EAAgCA;AAC5B,kBAAIA,CAAAA,CAAOwG,kBAAX,EAA+B;AAE3B,oBAAMC,CAAAA,GAASzG,CAAAA,CAAO0G,gBAAP1G,IAA2B,CAA1C;AACA,uBACIqE,IAAAA,CAAKsC,KAALtC,CAAKsC,CAAOvF,CAAAA,GAAQqF,CAAfE,IAAyB3G,CAAAA,CAAOwG,kBAArCnC,IACIrE,CAAAA,CAAOwG,kBADXnC,GAEAoC,CAHJ;AAQJ;;AAAA,qBAAOrF,CAAP;AAAOA;YAnVOrB,K;AAtCDA,SAAAA,E;;;;;;;;;;;;;;;;YCzDR6B,CAAAA,GAAAA,YAAAA;AACT,mBAAA,CAAA,CAAY5B,CAAZ,EAAoB4G,CAApB,EAAkC5F,CAAlC,EAAkCA;AAAI,gBAAA,CAAA;AAAA,gBAAA,CAAA,GAAA,IAAA;AAAA,a;;AAAA,a,CAAA,I,EAAA,C,CAAA,EAClCV,KAAKW,UAALX,GAAkBU,CADgB,EAElCV,KAAKyB,OAALzB,GAAeU,CAAAA,CAAGgB,MAAHhB,CAAUe,OAFS,EAGlCzB,KAAKY,IAALZ,GAAYU,CAAAA,CAAGE,IAHmB,EAIlCZ,KAAKuG,KAALvG,GAAaA,KAAKY,IAALZ,CAAUuG,KAJW,EAKlCvG,KAAKwG,WAALxG,GAAmBsG,CALe,EAMlCtG,KAAKiC,QAALjC,GAAgBU,CAAAA,CAAGgB,MAAHhB,CAAUhB,MAAVgB,CAAiBuB,QANC,EAQlCjC,KAAKoC,EAALpC,GAAuB,QAAbN,CAAAA,CAAO0C,EAAM,GAAO1B,CAAAA,CAAGE,IAAHF,CAAQ+F,KAAR/F,EAAP,GAAyBhB,CAAAA,CAAO0C,EARrB,EASlCpC,KAAKwD,KAALxD,GAAa0G,MAAAA,CAAOhH,CAAAA,CAAO8D,KAAdkD,CAAAA,IAAwB,CATH,EAUlC1G,KAAKkE,GAALlE,GACkB,QAAdN,CAAAA,CAAOwE,GAAO,GAEVlE,KAAKwD,KAALxD,GACC,IAAIA,KAAKyB,OAALzB,CAAa4E,WAAjB,GAAgC5E,KAAKW,UAALX,CAAgBsD,WAAhBtD,EAHvB,GAIR0G,MAAAA,CAAOhH,CAAAA,CAAOwE,GAAdwC,CAfwB,EAgBlC1G,KAAK2G,MAAL3G,GAAK2G,KACiBC,CADjBD,KACDjH,CAAAA,CAAOiH,MADNA,IACoCE,OAAAA,CAAQnH,CAAAA,CAAOiH,MAAfE,CAjBP,EAkBlC7G,KAAKoD,IAALpD,GAAKoD,KAAuBwD,CAAvBxD,KAAO1D,CAAAA,CAAO0D,IAAdA,IAA0CyD,OAAAA,CAAQnH,CAAAA,CAAO0D,IAAfyD,CAlBb,EAoBlC7G,KAAK8G,UAAL9G,GAAK8G,CAAa,CApBgB,EAqBlC9G,KAAK+G,UAAL/G,GAAK+G,CAAa,CArBgB,EAsBlC/G,KAAKgH,IAALhH,GAAY6G,OAAAA,CAAQnH,CAAAA,CAAOsH,IAAfH,CAtBsB,EAuBlC7G,KAAKiH,KAALjH,GAAaN,CAAAA,CAAOuH,KAAPvH,IAAgB,oBAvBK,EA0BlCM,KAAKkH,WAALlH,GAAmBN,CAAAA,CAAOwH,WAAPxH,IAAsB;AACrCmG,cAAAA,IAAAA,EAAM,EAD+B;AAErCC,cAAAA,KAAAA,EAAO;AAF8B,aA1BP,EA8BlC9F,KAAKmH,YAALnH,GAAoB,IA9Bc,EA+BlCA,KAAKoH,aAALpH,GAAqB,IA/Ba,EAgClCA,KAAKqH,IAALrH,GAAYN,CAAAA,CAAO2H,IAAP3H,IAAe,EAhCO,EAiClCM,KAAKsH,UAALtH,GAAkBN,CAAAA,CAAO4H,UAAP5H,IAAqB,EAjCL,EAkClCM,KAAKuH,WAALvH,GAAAA,UAAAA,CAAAA,GAAmBN,CAAAA,CAAO6H,WAA1BvH,KAA0BuH,KAA1BvH,CAA0BuH,KAA1BvH,CAAAA,IAAAA,CAlCkC,EAoClCA,KAAKwH,SAALxH,GAAiBN,CAAAA,CAAO8H,SApCU,EAsClCxH,KAAK2C,SAAL3C,GAAiBN,CAAAA,CAAOiD,SAtCU,EAuClC3C,KAAKyH,SAALzH,GAAiB,YAAA;AAAA,qBAAM,CAAA,CAAKqC,YAAL,EAAN;AAAWA,aAvCM,EAyClCrC,KAAKgD,MAALhD,GAAKgD,CAA2B,CAA3BA,KAAStD,CAAAA,CAAOsD,MAAhBA,IAAoCtC,CAAAA,CAAGhB,MAAHgB,CAAUuC,YAzCjB,EA0ClCjD,KAAKkD,WAALlD,GAAmBN,CAAAA,CAAOwD,WAAPxD,IAAsB,CA1CP,EA2ClCM,KAAKmD,eAALnD,GAAuBN,CAAAA,CAAOyD,eAAPzD,IAA0B,EA3Cf,EA6ClCM,KAAK0H,kBAAL1H,GAAK0H,KAC6Bd,CAD7Bc,KACDhI,CAAAA,CAAOgI,kBADNA,IAGKb,OAAAA,CAAQnH,CAAAA,CAAOgI,kBAAfb,CAhDwB;AAmDlC,gBAAIc,CAAAA,GACqB,QAArBjI,CAAAA,CAAOiI,UAAc,GAAdA,CAAsB,CAAR,GAAYC,QAAAA,CAASlI,CAAAA,CAAOiI,UAAhBC,CADrC;;AAKA,gBAHA5H,KAAK6H,YAAL7H,GAAoB,MAApBA,EACAA,KAAK8H,SAAL9H,GAAiB,KADjBA,EACiB,CAEG,CAFH,KAEb2H,CAAJ,EAAuB;AACnB,kBAAII,CAAAA,GACkC,QAAlC/H,KAAKW,UAALX,CAAgBgI,OAAhBhI,CAAwBiI,MAAU,GAC5BjI,KAAKW,UAALX,CAAgBgI,OAAhBhI,CAAwBiI,MAAxBjI,CAA+BkI,gBADH,GACGA,CAC9B,CAHX;AAIIH,cAAAA,CAAAA,IAAgB,CAAhBA,IAAqBJ,CAAAA,GAAaI,CAAlCA,KACA/H,KAAK6H,YAAL7H,GAAoB+D,IAAAA,CAAKoE,KAALpE,CAAY,IAAIgE,CAAJ,GAAoB,GAAhChE,IAAuC,GAA3D/D,EACAA,KAAK8H,SAAL9H,GACIA,KAAKW,UAALX,CAAgBoI,SAAhBpI,KAA8B2H,CAA9B3H,GAA2C,IAH/C+H;AAOR/H;;AAAAA,iBAAKqI,kBAALrI,GAA0BN,CAAAA,CAAO2I,kBAAjCrI,EACAA,KAAK6B,eAAL7B,GAAuBN,CAAAA,CAAOmC,eAD9B7B,EAEAA,KAAKsI,SAALtI,EAFAA,EAGAA,KAAKuI,MAALvI,EAHAA,EAIAA,KAAKW,UAALX,CAAgB4C,EAAhB5C,CAAmB,MAAnBA,EAA2BA,KAAKyH,SAAhCzH,CAJAA,EAKAA,KAAKW,UAALX,CAAgB4C,EAAhB5C,CAAmB,QAAnBA,EAA6BA,KAAKyH,SAAlCzH,CALAA,EAMAA,KAAKW,UAALX,CAAgBmF,SAAhBnF,CAA0B,gBAA1BA,EAA4CA,IAA5CA,CANAA;;;;;;mBAUJ,UAAON,CAAP,EAAe8I,CAAf,EAAeA;AACS,sBAAhB9I,CAAAA,CAAO8D,KAAS,KAChBxD,KAAKwD,KAALxD,GAAa0G,MAAAA,CAAOhH,CAAAA,CAAO8D,KAAdkD,CADG,GAGF,QAAdhH,CAAAA,CAAOwE,GAAO,KACdlE,KAAKkE,GAALlE,GAAW0G,MAAAA,CAAOhH,CAAAA,CAAOwE,GAAdwC,CADG,CAHE,EAMD,QAAfhH,CAAAA,CAAOsH,IAAQ,KACfhH,KAAKgH,IAALhH,GAAY6G,OAAAA,CAAQnH,CAAAA,CAAOsH,IAAfH,CADG,CANC,EASA,QAAhBnH,CAAAA,CAAOuH,KAAS,KAChBjH,KAAKiH,KAALjH,GAAaN,CAAAA,CAAOuH,KADJ,CATA,EAYM,QAAtBvH,CAAAA,CAAOwH,WAAe,KACtBlH,KAAKkH,WAALlH,GAAmBN,CAAAA,CAAOwH,WADJ,CAZN,EAeD,QAAfxH,CAAAA,CAAO2H,IAAQ,KACfrH,KAAKqH,IAALrH,GAAYN,CAAAA,CAAO2H,IADJ,CAfC,EAkBC,QAAjB3H,CAAAA,CAAOiH,MAAU,KACjB3G,KAAK2G,MAAL3G,GAAc6G,OAAAA,CAAQnH,CAAAA,CAAOiH,MAAfE,CAAd7G,EACAA,KAAKyI,mBAALzI,CAAyBA,KAAK2G,MAA9B3G,CAFiB,CAlBD,EAsBD,QAAfN,CAAAA,CAAO0D,IAAQ,KACfpD,KAAKoD,IAALpD,GAAY6G,OAAAA,CAAQnH,CAAAA,CAAO0D,IAAfyD,CADG,CAtBC,EAyBI,QAApBnH,CAAAA,CAAO8H,SAAa,KACpBxH,KAAKwH,SAALxH,GAAiB0G,MAAAA,CAAOhH,CAAAA,CAAO8H,SAAdd,CADG,CAzBJ,EA4BI,QAApBhH,CAAAA,CAAOiD,SAAa,KACpB3C,KAAK2C,SAAL3C,GAAiB0G,MAAAA,CAAOhH,CAAAA,CAAOiD,SAAd+D,CADG,CA5BJ,EA+BK,QAArBhH,CAAAA,CAAO4H,UAAc,KACrBtH,KAAKsH,UAALtH,GAAkBN,CAAAA,CAAO4H,UADJ,CA/BL,EAmCpBtH,KAAKqC,YAALrC,EAnCoB,EAoCpBA,KAAKmF,SAALnF,CAAe,QAAfA,CApCoB,EAqCpBA,KAAKW,UAALX,CAAgBmF,SAAhBnF,CAA0B,gBAA1BA,EAA4CA,IAA5CA,EAAkDwI,CAAlDxI,CArCoB;AAqC8BwI;;;mBAItD,YAAA;AACQxI,mBAAK0I,OAAL1I,KACAA,KAAKyB,OAALzB,CAAa2I,WAAb3I,CAAyBA,KAAK0I,OAAL1I,CAAa4I,UAAtC5I,GACAA,KAAK0I,OAAL1I,GAAe,IADfA,EAEAA,KAAKmF,SAALnF,CAAe,QAAfA,CAFAA,EAGAA,KAAKW,UAALX,CAAgBwC,EAAhBxC,CAAmB,MAAnBA,EAA2BA,KAAKyH,SAAhCzH,CAHAA,EAIAA,KAAKW,UAALX,CAAgBwC,EAAhBxC,CAAmB,QAAnBA,EAA6BA,KAAKyH,SAAlCzH,CAJAA,EAKAA,KAAKW,UAALX,CAAgBmF,SAAhBnF,CAA0B,gBAA1BA,EAA4CA,IAA5CA,CANAA;AAM4CA;;;mBAQpD,UAAKwD,CAAL,EAAKA;AACD,kBAAMqF,CAAAA,GAAIrF,CAAAA,IAASxD,KAAKwD,KAAxB;AACAxD,mBAAKW,UAALX,CAAgB8I,IAAhB9I,CAAqB6I,CAArB7I,EAAwBA,KAAKkE,GAA7BlE,GACAA,KAAKmF,SAALnF,CAAe,MAAfA,CADAA,EAEAA,KAAKW,UAALX,CAAgBmF,SAAhBnF,CAA0B,aAA1BA,EAAyCA,IAAzCA,CAFAA;AAEyCA;;;mBAO7C,UAASwD,CAAT,EAASA;AACLxD,mBAAKgH,IAALhH,GAAKgH,CAAO,CAAZhH,EACAA,KAAK8I,IAAL9I,CAAUwD,CAAVxD,CADAA;AACUwD;;;mBAOd,UAAQwD,CAAR,EAAQA;AACJhH,mBAAKgH,IAALhH,GAAYgH,CAAZhH;AAAYgH;;;mBAIhB,YAAA;AAYI,mBAAK,IAAMqC,CAAX,IAXArJ,KAAK0I,OAAL1I,GAAeA,KAAKY,IAALZ,CAAU6E,eAAV7E,CACXA,KAAKyB,OAALzB,CAAa+I,WAAb/I,CAAyBoF,QAAAA,CAAS4D,aAAT5D,CAAuB,QAAvBA,CAAzBpF,CADWA,EAEXA,KAAKiC,QAFMjC,CAAfA,EAKAA,KAAK0I,OAAL1I,CAAaiJ,SAAbjJ,GAAyB,mBALzBA,EAMIA,KAAKuH,WAALvH,KACAA,KAAK0I,OAAL1I,CAAakJ,KAAblJ,GAAqBA,KAAKmJ,UAALnJ,CAAgBA,KAAKwD,KAArBxD,EAA4BA,KAAKkE,GAAjClE,CADrBA,CANJA,EASAA,KAAK0I,OAAL1I,CAAaoJ,YAAbpJ,CAA0B,SAA1BA,EAAqCA,KAAKoC,EAA1CpC,CATAA,EAWuBA,KAAKsH,UAA5B,EACItH,KAAK0I,OAAL1I,CAAaoJ,YAAbpJ,CACI,iBAAiBqJ,CADrBrJ,EAEIA,KAAKsH,UAALtH,CAAgBqJ,CAAhBrJ,CAFJA;;AAcJ,kBARAA,KAAKuG,KAALvG,CAAWA,KAAK0I,OAAhB1I,EAAyB;AACrBsJ,gBAAAA,QAAAA,EAAU,UADW;AAErBC,gBAAAA,MAAAA,EAAQ,CAFa;AAGrBC,gBAAAA,MAAAA,EAAQxJ,KAAK6H,YAHQ;AAIrB4B,gBAAAA,GAAAA,EAAKzJ,KAAK8H;AAJW,eAAzB9H,GAQIA,KAAK2G,MAAT,EAAiB;AACb3G,qBAAKmH,YAALnH,GAAoBA,KAAKY,IAALZ,CAAU6E,eAAV7E,CAChBA,KAAK0I,OAAL1I,CAAa+I,WAAb/I,CAAyBoF,QAAAA,CAAS4D,aAAT5D,CAAuB,QAAvBA,CAAzBpF,CADgBA,EAEhBA,KAAKiC,QAFWjC,CAApBA,EAIAA,KAAKoH,aAALpH,GAAqBA,KAAKY,IAALZ,CAAU6E,eAAV7E,CACjBA,KAAK0I,OAAL1I,CAAa+I,WAAb/I,CAAyBoF,QAAAA,CAAS4D,aAAT5D,CAAuB,QAAvBA,CAAzBpF,CADiBA,EAEjBA,KAAKiC,QAFYjC,CAJrBA,EASAA,KAAKmH,YAALnH,CAAkBiJ,SAAlBjJ,GAA8B,2CAT9BA,EAUAA,KAAKoH,aAALpH,CAAmBiJ,SAAnBjJ,GAA+B,yCAV/BA;AAaA,oBAAM0J,CAAAA,GAAM;AACRC,kBAAAA,MAAAA,EAAQ3J,KAAKiC,QAALjC,GAAgB,YAAhBA,GAA+B,YAD/B;AAERsJ,kBAAAA,QAAAA,EAAU,UAFF;AAGRG,kBAAAA,GAAAA,EAAK,KAHG;AAIRG,kBAAAA,KAAAA,EAAO,KAJC;AAKRJ,kBAAAA,MAAAA,EAAQ,MALA;AAMRK,kBAAAA,eAAAA,EAAiB;AANT,iBAAZ;AAAA,oBAUMC,CAAAA,GACwB,WAA1B9J,KAAKkH,WAALlH,CAAiB6F,IAAS,GACpB5E,MAAAA,CAAO8I,MAAP9I,CACE;AAAE4E,kBAAAA,IAAAA,EAAM;AAAR,iBADF5E,EAEEyI,CAFFzI,EAGEjB,KAAKkH,WAALlH,CAAiB6F,IAHnB5E,CADoB,GAMpB,IAjBV;AAAA,oBAkBM+I,CAAAA,GACyB,WAA3BhK,KAAKkH,WAALlH,CAAiB8F,KAAU,GACrB7E,MAAAA,CAAO8I,MAAP9I,CACE;AAAE6E,kBAAAA,KAAAA,EAAO;AAAT,iBADF7E,EAEEyI,CAFFzI,EAGEjB,KAAKkH,WAALlH,CAAiB8F,KAHnB7E,CADqB,GAMrB,IAzBV;AA2BI6I,gBAAAA,CAAAA,IACA9J,KAAKuG,KAALvG,CAAWA,KAAKmH,YAAhBnH,EAA8B8J,CAA9B9J,CADA8J,EAIAE,CAAAA,IACAhK,KAAKuG,KAALvG,CAAWA,KAAKoH,aAAhBpH,EAA+BgK,CAA/BhK,CALA8J;AASR9J;;AAAAA,mBAAKqC,YAALrC,IACAA,KAAKiK,UAALjK,EADAA;AACKiK;;;mBAGT,UAAWzG,CAAX,EAAkBU,CAAlB,EAAkBA;AACd,qBAAIlE,KAAKqI,kBAALrI,GACOA,KAAKqI,kBAALrI,CAAwBwD,CAAxBxD,EAA+BkE,CAA/BlE,CADPA,GACsCkE,CAElCV,CAAAA,IAASU,CAATV,GAAe,CAACA,CAAD,CAAfA,GAAyB,CAACA,CAAD,EAAQU,CAAR,CAFSA,EAGrCgG,GAHqChG,CAGjC,UAAC6B,CAAD,EAACA;AAAD,uBACD,CACIhC,IAAAA,CAAKoE,KAALpE,CAAYgC,CAAAA,GAAO,IAAPA,GAAe,EAA3BhC,CADJ,EAC+B,CAC1B,OAAOA,IAAAA,CAAKoE,KAALpE,CAAWgC,CAAAA,GAAO,EAAlBhC,CADmB,EACIoG,KADJ,CACIA,CAAO,CADX,CAD/B,EAGEC,IAHF,CAGO,GAHP,CADC;AAIM,eAP2BlG,EASrCkG,IATqClG,CAShC,GATgCA,CAD1C;AAUU;;;mBAGd,YAAA;AACI,qBAAOlE,KAAKW,UAALX,CAAgB0B,MAAhB1B,CAAuB4J,KAAvB5J,GAA+BA,KAAKW,UAALX,CAAgBN,MAAhBM,CAAuBqK,UAA7D;AAA6DA;;;mBAIjE,YAAA;AAEI,kBAAMC,CAAAA,GAAMtK,KAAKW,UAALX,CAAgBsD,WAAhBtD,EAAZ;AAAA,kBACM4J,CAAAA,GAAQ5J,KAAKuK,QAALvK,EADd;AAAA,kBAGIwK,CAAAA,GAAexK,KAAKwD,KAHxB;AAAA,kBAIIiH,CAAAA,GAAazK,KAAKkE,GAJtB;;AAsBA,kBAjBIsG,CAAAA,GAAe,CAAfA,KAEAC,CAAAA,IADAD,CAAAA,GAAe,CADfA,GAIAC,CAAAA,GAAaH,CAAbG,KAEAD,CAAAA,GAAeF,CAAAA,IAAAA,CADfG,CAAAA,GAAaH,CACEA,IAAoBE,CAApBF,CAFfG,CAJAD,EASkB,QAAlBxK,KAAK2C,SAAa,KAClB8H,CAAAA,GAAa1G,IAAAA,CAAKE,GAALF,CAASyG,CAAAA,GAAexK,KAAK2C,SAA7BoB,EAAwC0G,CAAxC1G,CADK,CATlByG,EAakB,QAAlBxK,KAAKwH,SAAa,KAClBiD,CAAAA,GAAa1G,IAAAA,CAAKC,GAALD,CAASyG,CAAAA,GAAexK,KAAKwH,SAA7BzD,EAAwC0G,CAAxC1G,CADK,CAblByG,EAiBgB,QAAhBxK,KAAK0I,OAAT,EAA0B;AAGtB,oBAAM7C,CAAAA,GAAO9B,IAAAA,CAAKsC,KAALtC,CAAYyG,CAAAA,GAAeF,CAAfE,GAAsBZ,CAAlC7F,CAAb;AAAA,oBACM2G,CAAAA,GAAc3G,IAAAA,CAAKsC,KAALtC,CAAY0G,CAAAA,GAAaH,CAAbG,GAAoBb,CAAhC7F,IAAyC8B,CAD7D;;AAUA,qBAAK,IAAMwD,CAAX,IAPArJ,KAAKuG,KAALvG,CAAWA,KAAK0I,OAAhB1I,EAAyB;AACrB6F,kBAAAA,IAAAA,EAAMA,CAAAA,GAAO,IADQ;AAErB+D,kBAAAA,KAAAA,EAAOc,CAAAA,GAAc,IAFA;AAGrBb,kBAAAA,eAAAA,EAAiB7J,KAAKiH,KAHD;AAIrB0C,kBAAAA,MAAAA,EAAQ3J,KAAKoD,IAALpD,GAAY,MAAZA,GAAqB;AAJR,iBAAzBA,GAOuBA,KAAKsH,UAA5B,EACItH,KAAK0I,OAAL1I,CAAaoJ,YAAbpJ,CACI,iBAAiBqJ,CADrBrJ,EAEIA,KAAKsH,UAALtH,CAAgBqJ,CAAhBrJ,CAFJA;;AAMAA,qBAAKuH,WAALvH,KACAA,KAAK0I,OAAL1I,CAAakJ,KAAblJ,GAAqBA,KAAKmJ,UAALnJ,CAAgBA,KAAKwD,KAArBxD,EAA4BA,KAAKkE,GAAjClE,CADrBA;AACsDkE;AAAAA;;;mBAMlE,YAAA;AAAY,kBAAA,CAAA,GAAA,IAAA;AACRlE,mBAAK2K,OAAL3K,GAAK2K,CAAU,CAAf3K,EACAA,KAAK4K,QAAL5K,GAAK4K,CAAW,CADhB5K;;AAGA,kBAAM6K,CAAAA,GAAY,UAAC9E,CAAD,EAACA;AACf,oBAAIvC,CAAAA,GAAQO,IAAAA,CAAKsC,KAALtC,CAAwB,KAAb,CAAA,CAAKP,KAAhBO,IAA8B,EAA1C;AAAA,oBACIG,CAAAA,GAAMH,IAAAA,CAAKsC,KAALtC,CAAsB,KAAX,CAAA,CAAKG,GAAhBH,IAA4B,EADtC;AAEAgC,gBAAAA,CAAAA,GAAOhC,IAAAA,CAAKsC,KAALtC,CAAkB,KAAPgC,CAAXhC,IAAwB,EAA/BgC,EAA+B,CAG1B,CAAA,CAAK6E,QAHqB,IAI3B,CAAA,CAAKD,OAJsB,KAK1BnH,CAAAA,GAAQuC,CAARvC,IAAgBU,CAAAA,IAAO6B,CALG,MAO3B,CAAA,CAAK6E,QAAL,GAAKA,CAAW,CAAhB,EACA,CAAA,CAAKD,OAAL,GAAKA,CAAU,CADf,EAEA,CAAA,CAAKxF,SAAL,CAAe,KAAf,CAFA,EAGA,CAAA,CAAKxE,UAAL,CAAgBwE,SAAhB,CAA0B,YAA1B,EAAwC,CAAxC,CAV2B,CAA/BY,EAU4C,CAEvC,CAAA,CAAK4E,OAFkC,IAEvBnH,CAAAA,IAASuC,CAFc,IAEN7B,CAAAA,GAAM6B,CAFA,KAGxC,CAAA,CAAK4E,OAAL,GAAKA,CAAU,CAAf,EACA,CAAA,CAAKC,QAAL,GAAKA,CAAW,CADhB,EAEA,CAAA,CAAKzF,SAAL,CAAe,IAAf,CAFA,EAGA,CAAA,CAAKxE,UAAL,CAAgBwE,SAAhB,CAA0B,WAA1B,EAAuC,CAAvC,CANwC,CAV5CY;AAgB2C,eAnB/C;;AAuBA/F,mBAAKW,UAALX,CAAgBgI,OAAhBhI,CAAwB4C,EAAxB5C,CAA2B,cAA3BA,EAA2C6K,CAA3C7K,GAEAA,KAAK4C,EAAL5C,CAAQ,QAARA,EAAkB,YAAA;AACd,gBAAA,CAAA,CAAKW,UAAL,CAAgBqH,OAAhB,CAAwBxF,EAAxB,CAA2B,cAA3B,EAA2CqI,CAA3C;AAA2CA,eAD/C7K,CAFAA,EAOAA,KAAK4C,EAAL5C,CAAQ,KAARA,EAAe,YAAA;AACX,oBAAI,CAAA,CAAKgH,IAAT,EAAe;AACX,sBAAM8D,CAAAA,GAAW,CAAA,CAAKnK,UAAL,CAAgBqF,cAAhB,EAAjB;AACI8E,kBAAAA,CAAAA,IAAY,CAAA,CAAKtH,KAAjBsH,IAA0BA,CAAAA,IAAY,CAAA,CAAK5G,GAA3C4G,IACA,CAAA,CAAKnK,UAAL,CAAgBmI,IAAhB,CAAqB,CAAA,CAAKtF,KAA1B,CADAsH;AAC0BtH;AAAAA,eAJtCxD,CAPAA;AAWsCwD;;;mBAO1C,YAAA;AAAa,kBAAA,CAAA,GAAA,IAAA;AAAA,kBACHkE,CAAAA,GAAqB1H,KAAK0H,kBADvB;AAGT1H,mBAAK0I,OAAL1I,CAAa+E,gBAAb/E,CAA8B,YAA9BA,EAA4C,UAACoE,CAAD,EAACA;AACzC,gBAAA,CAAA,CAAKe,SAAL,CAAe,YAAf,EAA6Bf,CAA7B,GACA,CAAA,CAAKzD,UAAL,CAAgBwE,SAAhB,CAA0B,mBAA1B,EAA+C,CAA/C,EAAqDf,CAArD,CADA;AACqDA,eAFzDpE,GAKAA,KAAK0I,OAAL1I,CAAa+E,gBAAb/E,CAA8B,YAA9BA,EAA4C,UAACoE,CAAD,EAACA;AACzC,gBAAA,CAAA,CAAKe,SAAL,CAAe,YAAf,EAA6Bf,CAA7B,GACA,CAAA,CAAKzD,UAAL,CAAgBwE,SAAhB,CAA0B,mBAA1B,EAA+C,CAA/C,EAAqDf,CAArD,CADA;AACqDA,eAFzDpE,CALAA,EAUAA,KAAK0I,OAAL1I,CAAa+E,gBAAb/E,CAA8B,OAA9BA,EAAuC,UAACoE,CAAD,EAACA;AACpCA,gBAAAA,CAAAA,CAAE2G,cAAF3G,IACA,CAAA,CAAKe,SAAL,CAAe,OAAf,EAAwBf,CAAxB,CADAA,EAEA,CAAA,CAAKzD,UAAL,CAAgBwE,SAAhB,CAA0B,cAA1B,EAA0C,CAA1C,EAAgDf,CAAhD,CAFAA;AAEgDA,eAHpDpE,CAVAA,EAgBAA,KAAK0I,OAAL1I,CAAa+E,gBAAb/E,CAA8B,UAA9BA,EAA0C,UAACoE,CAAD,EAACA;AACvCA,gBAAAA,CAAAA,CAAE4G,eAAF5G,IACAA,CAAAA,CAAE2G,cAAF3G,EADAA,EAEA,CAAA,CAAKe,SAAL,CAAe,UAAf,EAA2Bf,CAA3B,CAFAA,EAGA,CAAA,CAAKzD,UAAL,CAAgBwE,SAAhB,CAA0B,iBAA1B,EAA6C,CAA7C,EAAmDf,CAAnD,CAHAA;AAGmDA,eAJvDpE,CAhBAA,EAuBAA,KAAK0I,OAAL1I,CAAa+E,gBAAb/E,CAA8B,aAA9BA,EAA6C,UAACoE,CAAD,EAACA;AACtCsD,gBAAAA,CAAAA,IACAtD,CAAAA,CAAE2G,cAAF3G,EADAsD,EAGJ,CAAA,CAAKvC,SAAL,CAAe,aAAf,EAA8Bf,CAA9B,CAHIsD,EAIJ,CAAA,CAAK/G,UAAL,CAAgBwE,SAAhB,CAA0B,oBAA1B,EAAgD,CAAhD,EAAsDf,CAAtD,CAJIsD;AAIkDtD,eAL1DpE,CAvBAA,EA4B0DoE,CAItDpE,KAAKoD,IAALpD,IAAaA,KAAK2G,MAJoCvC,KAKtDpE,KAAKiL,cAALjL,EAjCJA;AAiCSiL;;;mBAIb,YAAA;AAAiB,kBAITC,CAJS;AAAA,kBAKTzH,CALS;AAAA,kBAMTL,CANS;AAAA,kBAOTG,CAPS;AAAA,kBAQToD,CARS;AAAA,kBAUThD,CAVS;AAAA,kBAWTC,CAXS;AAAA,kBAYTwH,CAZS;AAAA,kBAaTC,CAbS;AAAA,kBAAA,CAAA,GAAA,IAAA;AAAA,kBACPtI,CAAAA,GAAY/C,KAAKW,UAALX,CAAgB0B,MAAhB1B,CAAuB+C,SAD5B;AAAA,kBAEPG,CAAAA,GAAclD,KAAKkD,WAFZ;AAAA,kBASTiI,CAAAA,IANoBnL,KAAKmD,eAALnD,EAAKmD,CAMf,CAAVgI,CATS;AAAA,kBAgBPtH,CAAAA,GAAa,SAAbA,CAAa,CAAC0B,CAAD,EAACA;AAChB,oBAAIG,CAAAA,GAAgB,CAAA,CAAK9E,IAAL,CAAUiE,eAAV,CAA0BU,CAA1B,EAAiC,CAAA,CAAKtD,QAAtC,CAApB;AAAA,oBACMoB,CAAAA,GAAW,CAAA,CAAK1C,UAAL,CAAgB2C,WAAhB,EADjB;;AAEA,oBAAKK,CAAAA,KAAqBP,CAAAA,IAASuD,CAA9BhD,CAAL,EAAA;AAIA,sBAAMgC,CAAAA,GAAID,CAAAA,CAAcE,OAAxB;AAAA,sBACI0F,CAAAA,GAAsC,CAD1C;AAAA,sBAEIC,CAAAA,GAAsB,CAF1B;AAAA,sBAGIC,CAAAA,GAAa,CAHjB;AAAA,sBAMIzF,CAAAA,GAAO,CAAA,CAAKS,WAAL,CAAiB3F,wBAAjB,CACP,CAAA,CAAKF,UAAL,CAAgBe,MAAhB,CAAuByC,WAAvB,CAAmCoB,CAAnC,IAA4ClC,CADrC,CANX;AAUA,sBAAID,CAAJ,EAAIA,CAEyB,CAFzBA,KAEIO,CAFJP,IAGImI,CAAAA,GAAsBH,CAAAA,GAAqB,CAAA,CAAKzK,UAAL,CAAgBjB,MAAhB,CAAuB+L,WAAlEF,EACAD,CAAAA,GAAsC3F,CAAAA,GAAI/B,CAAAA,CAAYiC,IAJ1DzC,KAMImI,CAAAA,GAAsBF,CAAAA,GAAsB,CAAA,CAAK1K,UAAL,CAAgBjB,MAAhB,CAAuB+L,WAAnEF,EACAD,CAAAA,GAAsC1H,CAAAA,CAAYkC,KAAZlC,GAAoB+B,CAP9DvC,EAAJ,KASO;AAEH,wBAAIT,CAAAA,GAAY,CAAA,CAAKA,SAArB;AACKA,oBAAAA,CAAAA,KACDA,CAAAA,GAAY,CADXA,CAAAA,EAIU,YAAXgE,CAAW,IACPZ,CAAAA,GAAO,CAAA,CAAK7B,GAAL,GAAWvB,CAAlBoD,KACAA,CAAAA,GAAO,CAAA,CAAK7B,GAAL,GAAWvB,CAAlBoD,EACAyF,CAAAA,GAAatI,CAAAA,GAAcS,CAF3BoC,GAKAA,CAAAA,GAAO,CAAPA,KACAA,CAAAA,GAAO,CADPA,CANO,IASO,UAAXY,CAAW,KACdZ,CAAAA,GAAO,CAAA,CAAKvC,KAAL,GAAab,CAApBoD,KACAA,CAAAA,GAAO,CAAA,CAAKvC,KAAL,GAAab,CAApBoD,EACAyF,CAAAA,GAAatI,CAAAA,GAAcS,CAF3BoC,GAKAA,CAAAA,GAAO1C,CAAP0C,KACAA,CAAAA,GAAO1C,CADP0C,CANc,CAbjBpD;AA0BT;AAAA,sBAAM+I,CAAAA,GAAoB,CAAA,CAAKjK,OAAL,CAAaqC,UAAvC;;AAEA,sBAAA,CAAyB,CAAzB,KAAIH,CAAJ,EAA4B;AACxB,wBAAsC,MAAlCI,IAAAA,CAAKsC,KAALtC,CAAW2H,CAAX3H,CAAJ,EACI;AAGJ,wBAAIA,IAAAA,CAAKsC,KAALtC,CAAW2H,CAAAA,GAAoBH,CAApBG,GAA0CJ,CAArDvH,KAA6F,CAAjG,EACI;AAAA,mBANR,MAQO;AACH,wBAAIA,IAAAA,CAAKsC,KAALtC,CAAW2H,CAAX3H,MAAkCR,CAAtC,EACI;AAGJ,wBAAIQ,IAAAA,CAAKsC,KAALtC,CAAW2H,CAAAA,GAAoBH,CAApBG,GAA0CJ,CAArDvH,KAA6FR,CAAjG,EACI;AAKR;;AAAA,sBAAIO,CAAAA,GAAa4H,CAAAA,GAAoBF,CAApBE,GAAiCxI,CAAAA,GAAcS,CAAhE;;AAEA,sBAAA,CAAyB,CAAzB,KAAIA,CAAJ,EAA4B;AACxB,wBAAMgI,CAAAA,GAAiB5H,IAAAA,CAAKE,GAALF,CAAS,IAAIwH,CAAJ,GAA0BD,CAAnCvH,EAAwED,CAAxEC,CAAvB;AACA,oBAAA,CAAA,CAAKtC,OAAL,CAAaqC,UAAb,GAA0BA,CAAAA,GAAa6H,CAAvC;AAAuCA,mBAF3C,MAGO;AACH,wBAAMC,CAAAA,GAAkB7H,IAAAA,CAAKC,GAALD,CAASR,CAAAA,GAAYgI,CAAZhI,GAAkC+H,CAA3CvH,EAAgFD,CAAhFC,CAAxB;AACA,oBAAA,CAAA,CAAKtC,OAAL,CAAaqC,UAAb,GAA0BA,CAAAA,GAAa8H,CAAvC;AAGJ;;AAAA,sBAAMC,CAAAA,GAAQ9F,CAAAA,GAAOmF,CAArB;AACAA,kBAAAA,CAAAA,GAAYnF,CAAZmF,EAGA9H,CAAAA,GAAO,CAAA,CAAK0I,MAAL,CAAYD,CAAZ,CAAPzI,GAA4B,CAAA,CAAK2I,QAAL,CAAcF,CAAd,EAAqBlF,CAArB,CAH5BuE,EAMA5G,MAAAA,CAAOC,qBAAPD,CAA6B,YAAA;AACzBT,oBAAAA,CAAAA,CAAW0B,CAAX1B,CAAAA;AAAW0B,mBADfjB,CANA4G;AAOe3F;AAAAA,eA9GN;AAAA,kBAkHPyG,CAAAA,GAAS,UAACzG,CAAD,EAACA;AACZ,oBAAMlC,CAAAA,GAAW,CAAA,CAAK1C,UAAL,CAAgB2C,WAAhB,EAAjB;AACIiC,gBAAAA,CAAAA,CAAMd,OAANc,IAAiBA,CAAAA,CAAMd,OAANc,CAAc9C,MAAd8C,GAAuB,CAAxCA,KAGJ9B,CAAAA,GAAU8B,CAAAA,CAAMb,aAANa,GAAsBA,CAAAA,CAAMb,aAANa,CAAoB,CAApBA,EAAuBZ,UAA7CY,GAA0D,IAApE9B,EAAoE,CAIhE,CAAA,CAAKL,IAAL,IAAa,CAAA,CAAKuD,MAJ8C,KAKhEpB,CAAAA,CAAMyF,eAANzF,EALJ9B,EASAyH,CAAAA,GAAY,CAAA,CAAK1E,WAAL,CAAiB3F,wBAAjB,CACR,CAAA,CAAKF,UAAL,CAAgBe,MAAhB,CAAuByC,WAAvB,CAAmCoB,CAAnC,EAAmCA,CAAO,CAA1C,IAAkDlC,CAD1C,CATZI,EAcA2H,CAAAA,GAAqBF,CAAAA,GAAY,CAAA,CAAK1H,KAdtCC,EAeA4H,CAAAA,GAAsB,CAAA,CAAKnH,GAAL,GAAWgH,CAfjCzH,EAkBAF,CAAAA,GAAY,CAAA,CAAK9B,OAAL,CAAamD,WAAb,GAA2B,CAAA,CAAKnD,OAAL,CAAaK,WAlBpD2B,EAoBAG,CAAAA,GAAc,CAAA,CAAKhD,IAAL,CAAUiE,eAAV,CACV,CAAA,CAAKpD,OAAL,CAAaqD,qBAAb,EADU,EAEV,CAAA,CAAK7C,QAFK,CApBdwB,EAyBA,CAAA,CAAKqD,UAAL,GAAKA,CAAa,CAzBlBrD,EA0BA,CAAA,CAAKsD,UAAL,GAAKA,CAAa,CA1BlBtD,EA2B2C,aAAvC8B,CAAAA,CAAM0G,MAAN1G,CAAa2G,OAAb3G,CAAqB4G,WAArB5G,EAAuC,IACvC,CAAA,CAAKuB,UAAL,GAAKA,CAAa,CAAlB,EACAH,CAAAA,GAASpB,CAAAA,CAAM0G,MAAN1G,CAAa6G,SAAb7G,CAAuB8G,QAAvB9G,CAAgC,yBAAhCA,IACH,OADGA,GAEH,KAJiC,KAMvC,CAAA,CAAKwB,UAAL,GAAKA,CAAa,CAAlB,EACA3D,CAAAA,GAAAA,CAAO,CADP,EAEAuD,CAAAA,GAAAA,CAAS,CAR8B,CA9BvCpB;AAsCS,eA1JJ;AAAA,kBA6JP+G,CAAAA,GAAO,UAAC/G,CAAD,EAACA;AACNA,gBAAAA,CAAAA,CAAMd,OAANc,IAAiBA,CAAAA,CAAMd,OAANc,CAAc9C,MAAd8C,GAAuB,CAAxCA,KAAwC,CAIxCnC,CAAAA,IAAQuD,CAJgC,MAKxC,CAAA,CAAKI,UAAL,GAAKA,CAAa,CAAlB,EACA,CAAA,CAAKD,UAAL,GAAKA,CAAa,CADlB,EAEA1D,CAAAA,GAAAA,CAAO,CAFP,EAGAO,CAAAA,GAAkB,IAHlB,EAIAgD,CAAAA,GAAAA,CAAS,CAT+B,GAYxCwE,CAAAA,KACAA,CAAAA,GAAAA,CAAU,CAAVA,EACA,CAAA,CAAKvK,IAAL,CAAUsE,YAAV,EADAiG,EAEA,CAAA,CAAKhG,SAAL,CAAe,YAAf,EAA6BI,CAA7B,CAFA4F,EAGA,CAAA,CAAKxK,UAAL,CAAgBwE,SAAhB,CAA0B,mBAA1B,EAA+C,CAA/C,EAAqDI,CAArD,CAJA4F,CAZA5F;AAgBqDA,eA9KhD;AAAA,kBAiLPgH,CAAAA,GAAS,UAAChH,CAAD,EAACA;AACZ,oBAAMlC,CAAAA,GAAW,CAAA,CAAK1C,UAAL,CAAgB2C,WAAhB,EAAjB;AAAA,oBACIoC,CAAAA,GAAgB,CAAA,CAAK9E,IAAL,CAAUiE,eAAV,CAA0BU,CAA1B,EAAiC,CAAA,CAAKtD,QAAtC,CADpB;;AAGA,oBAAA,EAAIsD,CAAAA,CAAMd,OAANc,IAAiBA,CAAAA,CAAMd,OAANc,CAAc9C,MAAd8C,GAAuB,CAA5C,MAA4C,CAGxCA,CAAAA,CAAMb,aAHkC,IAGjBa,CAAAA,CAAMb,aAANa,CAAoB,CAApBA,EAAuBZ,UAAvBY,IAAqC9B,CAHhE,MAMKL,CAAAA,IAASuD,CANd,CAAA,EAMA;AAIA,sBACIZ,CAAAA,GAAO,CAAA,CAAKS,WAAL,CAAiB3F,wBAAjB,CACP,CAAA,CAAKF,UAAL,CAAgBe,MAAhB,CAAuByC,WAAvB,CAAmCoB,CAAnC,IAA4ClC,CADrC,CADX;;AAKA,sBAAID,CAAJ,EAAU;AAEN,wBAAMoJ,CAAAA,GAAS,CAAA,CAAK7L,UAAL,CAAgB2C,WAAhB,EAAf;AACIyC,oBAAAA,CAAAA,GAAOyG,CAAAA,GAASnB,CAAhBtF,KACAA,CAAAA,GAAOyG,CAAAA,GAASnB,CADhBtF,GAIAA,CAAAA,GAAOqF,CAAPrF,GAA4B,CAA5BA,KACAA,CAAAA,GAAOqF,CADPrF,CAJAA;AASR;;AAAA,sBAAIY,CAAJ,EAAY;AAGR,wBAAIhE,CAAAA,GAAY,CAAA,CAAKA,SAArB;AACKA,oBAAAA,CAAAA,KACDA,CAAAA,GAAY,CADXA,CAAAA,EAIU,YAAXgE,CAAW,IACPZ,CAAAA,GAAO,CAAA,CAAK7B,GAAL,GAAWvB,CAAlBoD,KACAA,CAAAA,GAAO,CAAA,CAAK7B,GAAL,GAAWvB,CADlBoD,GAIAA,CAAAA,GAAO,CAAPA,KACAA,CAAAA,GAAO,CADPA,CALO,IAQO,UAAXY,CAAW,KACdZ,CAAAA,GAAO,CAAA,CAAKvC,KAAL,GAAab,CAApBoD,KACAA,CAAAA,GAAO,CAAA,CAAKvC,KAAL,GAAab,CADpBoD,GAIAA,CAAAA,GAAO1C,CAAP0C,KACAA,CAAAA,GAAO1C,CADP0C,CALc,CAZjBpD;AAuBT;;AAAA,sBAAIkJ,CAAAA,GAAQ9F,CAAAA,GAAOmF,CAAnB;;AAeA,sBAdAA,CAAAA,GAAYnF,CAAZmF,EAGI,CAAA,CAAK9H,IAAL,IAAaA,CAAb,KACA+H,CAAAA,GAAUA,CAAAA,IAAAA,CAAAA,CAAaU,CAAvBV,EACA,CAAA,CAAKW,MAAL,CAAYD,CAAZ,CAFA,CAHJX,EASI,CAAA,CAAKvE,MAAL,IAAeA,CAAf,KACAwE,CAAAA,GAAUA,CAAAA,IAAAA,CAAAA,CAAaU,CAAvBV,EACA,CAAA,CAAKY,QAAL,CAAcF,CAAd,EAAqBlF,CAArB,CAFA,CATJuE,EAeI,CAAA,CAAKlI,MAAL,IAAeD,CAAAA,CAAUjB,WAAViB,GAAwB,CAAA,CAAKtB,OAAL,CAAamD,WADxD,EAEE;AAEE,wBAAIe,CAAAA,GAAID,CAAAA,CAAcE,OAAtB;AAAsBA,qBAIlBjC,CAAAA,GADAgC,CAAAA,GAAI/B,CAAAA,CAAYiC,IAAZjC,GAAmB,CAAA,CAAK/B,eAA5B8D,GAA4B9D,CACT,CADnB8D,GAEOA,CAAAA,GAAI/B,CAAAA,CAAYkC,KAAZlC,GAAoB,CAAA,CAAK/B,eAA7B8D,GACW,CADXA,GAGW,IARAC,KAYlB/B,CAAAA,CAAW0B,CAAX1B,CAZkB+B;AAYPL;AAAAA;AAAAA,eA1QV;;AA+QbvF,mBAAK0I,OAAL1I,CAAa+E,gBAAb/E,CAA8B,WAA9BA,EAA2CgM,CAA3ChM,GACAA,KAAK0I,OAAL1I,CAAa+E,gBAAb/E,CAA8B,YAA9BA,EAA4CgM,CAA5ChM,CADAA,EAGAoF,QAAAA,CAASC,IAATD,CAAcL,gBAAdK,CAA+B,WAA/BA,EAA4CmH,CAA5CnH,CAHApF,EAIAoF,QAAAA,CAASC,IAATD,CAAcL,gBAAdK,CAA+B,WAA/BA,EAA4CmH,CAA5CnH,EAAoD;AAACqH,gBAAAA,OAAAA,EAAAA,CAAS;AAAV,eAApDrH,CAJApF,EAMAoF,QAAAA,CAASL,gBAATK,CAA0B,SAA1BA,EAAqCkH,CAArClH,CANApF,EAOAoF,QAAAA,CAASC,IAATD,CAAcL,gBAAdK,CAA+B,UAA/BA,EAA2CkH,CAA3ClH,CAPApF,EASAA,KAAK4C,EAAL5C,CAAQ,QAARA,EAAkB,YAAA;AACdoF,gBAAAA,QAAAA,CAASJ,mBAATI,CAA6B,SAA7BA,EAAwCkH,CAAxClH,GACAA,QAAAA,CAASC,IAATD,CAAcJ,mBAAdI,CAAkC,UAAlCA,EAA8CkH,CAA9ClH,CADAA,EAEAA,QAAAA,CAASC,IAATD,CAAcJ,mBAAdI,CAAkC,WAAlCA,EAA+CmH,CAA/CnH,CAFAA,EAGAA,QAAAA,CAASC,IAATD,CAAcJ,mBAAdI,CAAkC,WAAlCA,EAA+CmH,CAA/CnH,CAHAA;AAG+CmH,eAJnDvM,CATAA,EAgBAA,KAAKW,UAALX,CAAgB4C,EAAhB5C,CAAmB,SAAnBA,EAA8B,YAAA;AAC1BoF,gBAAAA,QAAAA,CAASJ,mBAATI,CAA6B,SAA7BA,EAAwCkH,CAAxClH,GACAA,QAAAA,CAASC,IAATD,CAAcJ,mBAAdI,CAAkC,UAAlCA,EAA8CkH,CAA9ClH,CADAA;AAC8CkH,eAFlDtM,CAhBAA;AAkBkDsM;;;mBAItD,UAAOT,CAAP,EAAOA;AACH,kBAAMW,CAAAA,GAASxM,KAAKW,UAALX,CAAgBsD,WAAhBtD,EAAf;AACIA,mBAAKkE,GAALlE,GAAW6L,CAAX7L,GAAmBwM,CAAnBxM,KACA6L,CAAAA,GAAQW,CAAAA,GAASxM,KAAKkE,GADtBlE,GAIAA,KAAKwD,KAALxD,GAAa6L,CAAb7L,GAAqB,CAArBA,KACA6L,CAAAA,GAAAA,CAAsB,CAAtBA,GAAQ7L,KAAKwD,KADbxD,CAJAA;AAQJ,kBAAMwI,CAAAA,GAAc;AAChBkE,gBAAAA,SAAAA,EAAW1M,KAAK2M,iBAAL3M,CAAuB6L,CAAvB7L,CADK;AAEhB4M,gBAAAA,MAAAA,EAAQ;AAFQ,eAApB;AAKA5M,mBAAKqE,MAALrE,CAAY;AACRwD,gBAAAA,KAAAA,EAAOxD,KAAKwD,KAALxD,GAAa6L,CADZ;AAER3H,gBAAAA,GAAAA,EAAKlE,KAAKkE,GAALlE,GAAW6L;AAFR,eAAZ7L,EAGGwI,CAHHxI;AAGGwI;;;mBAWP,UAAkBqD,CAAlB,EAAkBA;AACd,qBAAIA,CAAAA,GAAQ,CAARA,GACO,MADPA,GAGAA,CAAAA,GAAQ,CAARA,GACO,OADPA,GAGG,IANP;AAMO;;;mBAWX,UAASA,CAAT,EAAgBa,CAAhB,EAAgBA;AACZ,kBAAMrJ,CAAAA,GAAWrD,KAAKW,UAALX,CAAgBsD,WAAhBtD,EAAjB;AAAA,kBACMwI,CAAAA,GAAc;AAChBoE,gBAAAA,MAAAA,EAAQ,QADQ;AAEhBF,gBAAAA,SAAAA,EAAyB,YAAdA,CAAc,GAAU,OAAV,GAAoB;AAF7B,eADpB;AAMkB,0BAAdA,CAAc,IAGVb,CAAAA,GAAQ,CAARA,IAAa7L,KAAKkE,GAALlE,IAAYA,KAAKwD,KAALxD,GAAa6L,CAAzB7L,IAAkCA,KAAK2C,SAApDkJ,KACAA,CAAAA,GAAQ7L,KAAKkE,GAALlE,GAAWA,KAAK2C,SAAhB3C,GAA4BA,KAAKwD,KADzCqI,GAIAA,CAAAA,GAAQ,CAARA,IAAc7L,KAAKwD,KAALxD,GAAa6L,CAAb7L,GAAsB,CAApC6L,KACAA,CAAAA,GAAAA,CAAsB,CAAtBA,GAAQ7L,KAAKwD,KADbqI,CAJAA,EAQJ7L,KAAKqE,MAALrE,CAAY;AACRwD,gBAAAA,KAAAA,EAAOO,IAAAA,CAAKC,GAALD,CAAS/D,KAAKwD,KAALxD,GAAa6L,CAAtB9H,EAA6B/D,KAAKkE,GAAlCH,CADC;AAERG,gBAAAA,GAAAA,EAAKH,IAAAA,CAAKE,GAALF,CAAS/D,KAAKwD,KAALxD,GAAa6L,CAAtB9H,EAA6B/D,KAAKkE,GAAlCH;AAFG,eAAZ/D,EAGGwI,CAHHxI,CAXc,KAkBV6L,CAAAA,GAAQ,CAARA,IAAa7L,KAAKkE,GAALlE,GAAW6L,CAAX7L,GAAmBA,KAAKwD,KAAxBxD,GAAgCA,KAAK2C,SAAlDkJ,KACAA,CAAAA,GAAQ7L,KAAKwD,KAALxD,GAAaA,KAAK2C,SAAlB3C,GAA8BA,KAAKkE,GAD3C2H,GAIAA,CAAAA,GAAQ,CAARA,IAAc7L,KAAKkE,GAALlE,GAAW6L,CAAX7L,GAAoBqD,CAAlCwI,KACAA,CAAAA,GAAQxI,CAAAA,GAAWrD,KAAKkE,GADxB2H,CAJAA,EAQJ7L,KAAKqE,MAALrE,CAAY;AACRwD,gBAAAA,KAAAA,EAAOO,IAAAA,CAAKC,GAALD,CAAS/D,KAAKkE,GAALlE,GAAW6L,CAApB9H,EAA2B/D,KAAKwD,KAAhCO,CADC;AAERG,gBAAAA,GAAAA,EAAKH,IAAAA,CAAKE,GAALF,CAAS/D,KAAKkE,GAALlE,GAAW6L,CAApB9H,EAA2B/D,KAAKwD,KAAhCO;AAFG,eAAZ/D,EAGGwI,CAHHxI,CA1Bc;AA6BXwI;;;mBAIX,UAAoB7B,CAApB,EAAoBA;AAChB,kBAAIkG,CAAJ;AAEIA,cAAAA,CAAAA,GADAlG,CAAAA,GACc3G,KAAKiC,QAALjC,GAAgB,YAAhBA,GAA+B,YAD7C2G,GAGc,MAFdkG,EAKJ7M,KAAKmH,YAALnH,IAAqBA,KAAKuG,KAALvG,CAAWA,KAAKmH,YAAhBnH,EAA8B;AAAE2J,gBAAAA,MAAAA,EAAQkD;AAAV,eAA9B7M,CALjB6M,EAMJ7M,KAAKoH,aAALpH,IAAsBA,KAAKuG,KAALvG,CAAWA,KAAKoH,aAAhBpH,EAA+B;AAAE2J,gBAAAA,MAAAA,EAAQkD;AAAV,eAA/B7M,CANlB6M;AAM2DA;;AAlxB1DvL,SAAAA,E;;;;;QCTTwL,CAAAA,GAA2B,E;WAG/B,SAASC,CAAT,CAA6BC,CAA7B,EAA6BA;AAE5B,UAAIC,CAAAA,GAAeH,CAAAA,CAAyBE,CAAzBF,CAAnB;AACA,UAAA,KAAqBlG,CAArB,KAAIqG,CAAJ,EACC,OAAOA,CAAAA,CAAa7N,OAApB;AAGD,UAAIC,CAAAA,GAASyN,CAAAA,CAAyBE,CAAzBF,CAAAA,GAAqC;AAGjD1N,QAAAA,OAAAA,EAAS;AAHwC,OAAlD;AAUA,aAHA8N,CAAAA,CAAoBF,CAApBE,CAAAA,CAA8B7N,CAA9B6N,EAAsC7N,CAAAA,CAAOD,OAA7C8N,EAAsDH,CAAtDG,GAGO7N,CAAAA,CAAOD,OAAd;AClByB2N,KDC1B,CCD8C,EDC9C,C;AHMA,GAAA,GAAA;AAAA,CAVA,C","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"regions\"] = factory();\n})(self, function() {\nreturn ","/**\n *  @since 4.0.0 This class has been split\n *\n * @typedef {Object} RegionsPluginParams\n * @property {?boolean} dragSelection Enable creating regions by dragging with\n * the mouse\n * @property {?RegionParams[]} regions Regions that should be added upon\n * initialisation\n * @property {number} slop=2 The sensitivity of the mouse dragging\n * @property {?number} snapToGridInterval Snap the regions to a grid of the specified multiples in seconds\n * @property {?number} snapToGridOffset Shift the snap-to-grid by the specified seconds. May also be negative.\n * @property {?boolean} deferInit Set to true to manually call\n * @property {number[]} maxRegions Maximum number of regions that may be created by the user at one time.\n * `initPlugin('regions')`\n * @property {function} formatTimeCallback Allows custom formating for region tooltip.\n * @property {?number} edgeScrollWidth='5% from container edges' Optional width for edgeScroll to start\n */\n\n/**\n * @typedef {Object} RegionParams\n * @desc The parameters used to describe a region.\n * @example wavesurfer.addRegion(regionParams);\n * @property {string} id=random The id of the region\n * @property {number} start=0 The start position of the region (in seconds).\n * @property {number} end=0 The end position of the region (in seconds).\n * @property {?boolean} loop Whether to loop the region when played back.\n * @property {boolean} drag=true Allow/disallow dragging the region.\n * @property {boolean} resize=true Allow/disallow resizing the region.\n * @property {string} [color='rgba(0, 0, 0, 0.1)'] HTML color code.\n * @property {?number} channelIdx Select channel to draw the region on (if there are multiple channel waveforms).\n * @property {?object} handleStyle A set of CSS properties used to style the left and right handle.\n * @property {?boolean} preventContextMenu=false Determines whether the context menu is prevented from being opened.\n * @property {boolean} showTooltip=true Enable/disable tooltip displaying start and end times when hovering over region.\n */\n\nimport {Region} from \"./region.js\";\n\n/**\n * Regions are visual overlays on waveform that can be used to play and loop\n * portions of audio. Regions can be dragged and resized.\n *\n * Visual customization is possible via CSS (using the selectors\n * `.wavesurfer-region` and `.wavesurfer-handle`).\n *\n * @implements {PluginClass}\n * @extends {Observer}\n *\n * @example\n * // es6\n * import RegionsPlugin from 'wavesurfer.regions.js';\n *\n * // commonjs\n * var RegionsPlugin = require('wavesurfer.regions.js');\n *\n * // if you are using <script> tags\n * var RegionsPlugin = window.WaveSurfer.regions;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     RegionsPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class RegionsPlugin {\n    /**\n     * Regions plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param {RegionsPluginParams} params parameters use to initialise the plugin\n     * @return {PluginDefinition} an object representing the plugin\n     */\n    static create(params) {\n        return {\n            name: 'regions',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {\n                addRegion(options) {\n                    if (!this.initialisedPluginList.regions) {\n                        this.initPlugin('regions');\n                    }\n                    return this.regions.add(options);\n                },\n\n                clearRegions() {\n                    this.regions && this.regions.clear();\n                },\n\n                enableDragSelection(options) {\n                    if (!this.initialisedPluginList.regions) {\n                        this.initPlugin('regions');\n                    }\n                    this.regions.enableDragSelection(options);\n                },\n\n                disableDragSelection() {\n                    this.regions.disableDragSelection();\n                }\n            },\n            instance: RegionsPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.wavesurfer = ws;\n        this.util = {\n            ...ws.util,\n            getRegionSnapToGridValue: value => {\n                return this.getRegionSnapToGridValue(value, params);\n            }\n        };\n        this.maxRegions = params.maxRegions;\n        this.regionsMinLength = params.regionsMinLength || null;\n\n        // turn the plugin instance into an observer\n        const observerPrototypeKeys = Object.getOwnPropertyNames(\n            this.util.Observer.prototype\n        );\n        observerPrototypeKeys.forEach(key => {\n            Region.prototype[key] = this.util.Observer.prototype[key];\n        });\n        this.wavesurfer.Region = Region;\n\n        // By default, scroll the container if the user drags a region\n        // within 5% of its edge\n        const scrollWidthProportion = 0.05;\n        this._onBackendCreated = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            this.orientation = this.wavesurfer.drawer.orientation;\n            if (this.params.regions) {\n                this.params.regions.forEach(region => {\n                    region.edgeScrollWidth = this.params.edgeScrollWidth ||\n                        this.wrapper.clientWidth * scrollWidthProportion;\n                    this.add(region);\n                });\n            }\n        };\n\n        // Id-based hash of regions\n        this.list = {};\n        this._onReady = () => {\n            this.wrapper = this.wavesurfer.drawer.wrapper;\n            this.vertical = this.wavesurfer.drawer.params.vertical;\n            if (this.params.dragSelection) {\n                this.enableDragSelection(this.params);\n            }\n            Object.keys(this.list).forEach(id => {\n                this.list[id].updateRender();\n            });\n        };\n    }\n\n    init() {\n        // Check if ws is ready\n        if (this.wavesurfer.isReady) {\n            this._onBackendCreated();\n            this._onReady();\n        } else {\n            this.wavesurfer.once('ready', this._onReady);\n            this.wavesurfer.once('backend-created', this._onBackendCreated);\n        }\n    }\n\n    destroy() {\n        this.wavesurfer.un('ready', this._onReady);\n        this.wavesurfer.un('backend-created', this._onBackendCreated);\n        this.disableDragSelection();\n        this.clear();\n    }\n\n    /**\n     * check to see if adding a new region would exceed maxRegions\n     * @return {boolean} whether we should proceed and create a region\n     * @private\n     */\n    wouldExceedMaxRegions() {\n        return (\n            this.maxRegions && Object.keys(this.list).length >= this.maxRegions\n        );\n    }\n\n    /**\n     * Add a region\n     *\n     * @param {object} params Region parameters\n     * @return {Region} The created region\n     */\n    add(params) {\n        if (this.wouldExceedMaxRegions()) {\n            return null;\n        }\n\n        if (!params.minLength && this.regionsMinLength) {\n            params = {...params, minLength: this.regionsMinLength};\n        }\n\n        const region = new this.wavesurfer.Region(params, this.util, this.wavesurfer);\n\n        this.list[region.id] = region;\n\n        region.on('remove', () => {\n            delete this.list[region.id];\n        });\n\n        return region;\n    }\n\n    /**\n     * Remove all regions\n     */\n    clear() {\n        Object.keys(this.list).forEach(id => {\n            this.list[id].remove();\n        });\n    }\n\n    enableDragSelection(params) {\n        this.disableDragSelection();\n\n        const slop = params.slop || 2;\n        const container = this.wavesurfer.drawer.container;\n        const scroll =\n            params.scroll !== false && this.wavesurfer.params.scrollParent;\n        const scrollSpeed = params.scrollSpeed || 1;\n        const scrollThreshold = params.scrollThreshold || 10;\n        let drag;\n        let duration = this.wavesurfer.getDuration();\n        let maxScroll;\n        let start;\n        let region;\n        let touchId;\n        let pxMove = 0;\n        let scrollDirection;\n        let wrapperRect;\n\n        // Scroll when the user is dragging within the threshold\n        const edgeScroll = e => {\n            if (!region || !scrollDirection) {\n                return;\n            }\n\n            // Update scroll position\n            let scrollLeft =\n                this.wrapper.scrollLeft + scrollSpeed * scrollDirection;\n            this.wrapper.scrollLeft = scrollLeft = Math.min(\n                maxScroll,\n                Math.max(0, scrollLeft)\n            );\n\n            // Update range\n            const end = this.wavesurfer.drawer.handleEvent(e);\n            region.update({\n                start: Math.min(end * duration, start * duration),\n                end: Math.max(end * duration, start * duration)\n            });\n\n            // Check that there is more to scroll and repeat\n            if (scrollLeft < maxScroll && scrollLeft > 0) {\n                window.requestAnimationFrame(() => {\n                    edgeScroll(e);\n                });\n            }\n        };\n\n        const eventDown = e => {\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n            duration = this.wavesurfer.getDuration();\n            touchId = e.targetTouches ? e.targetTouches[0].identifier : null;\n\n            // Store for scroll calculations\n            maxScroll = this.wrapper.scrollWidth -\n                this.wrapper.clientWidth;\n            wrapperRect = this.util.withOrientation(\n                this.wrapper.getBoundingClientRect(),\n                this.vertical\n            );\n\n            drag = true;\n            start = this.wavesurfer.drawer.handleEvent(e, true);\n            region = null;\n            scrollDirection = null;\n        };\n        this.wrapper.addEventListener('mousedown', eventDown);\n        this.wrapper.addEventListener('touchstart', eventDown);\n        this.on('disable-drag-selection', () => {\n            this.wrapper.removeEventListener('touchstart', eventDown);\n            this.wrapper.removeEventListener('mousedown', eventDown);\n        });\n\n        const eventUp = e => {\n            if (e.touches && e.touches.length > 1) {\n                return;\n            }\n\n            drag = false;\n            pxMove = 0;\n            scrollDirection = null;\n\n            if (region) {\n                this.util.preventClick();\n                region.fireEvent('update-end', e);\n                this.wavesurfer.fireEvent('region-update-end', region, e);\n            }\n\n            region = null;\n        };\n        this.wrapper.addEventListener('mouseleave', eventUp);\n        this.wrapper.addEventListener('mouseup', eventUp);\n        this.wrapper.addEventListener('touchend', eventUp);\n\n        document.body.addEventListener('mouseup', eventUp);\n        document.body.addEventListener('touchend', eventUp);\n        this.on('disable-drag-selection', () => {\n            document.body.removeEventListener('mouseup', eventUp);\n            document.body.removeEventListener('touchend', eventUp);\n            this.wrapper.removeEventListener('touchend', eventUp);\n            this.wrapper.removeEventListener('mouseup', eventUp);\n            this.wrapper.removeEventListener('mouseleave', eventUp);\n        });\n\n        const eventMove = event => {\n            if (!drag) {\n                return;\n            }\n            if (++pxMove <= slop) {\n                return;\n            }\n\n            if (event.touches && event.touches.length > 1) {\n                return;\n            }\n            if (event.targetTouches && event.targetTouches[0].identifier != touchId) {\n                return;\n            }\n\n            // auto-create a region during mouse drag, unless region-count would exceed \"maxRegions\"\n            if (!region) {\n                region = this.add(params || {});\n                if (!region) {\n                    return;\n                }\n            }\n\n            const end = this.wavesurfer.drawer.handleEvent(event);\n            const startUpdate = this.wavesurfer.regions.util.getRegionSnapToGridValue(\n                start * duration\n            );\n            const endUpdate = this.wavesurfer.regions.util.getRegionSnapToGridValue(\n                end * duration\n            );\n            region.update({\n                start: Math.min(endUpdate, startUpdate),\n                end: Math.max(endUpdate, startUpdate)\n            });\n\n            let orientedEvent = this.util.withOrientation(event, this.vertical);\n\n            // If scrolling is enabled\n            if (scroll && container.clientWidth < this.wrapper.scrollWidth) {\n                // Check threshold based on mouse\n                const x = orientedEvent.clientX - wrapperRect.left;\n                if (x <= scrollThreshold) {\n                    scrollDirection = -1;\n                } else if (x >= wrapperRect.right - scrollThreshold) {\n                    scrollDirection = 1;\n                } else {\n                    scrollDirection = null;\n                }\n                scrollDirection && edgeScroll(event);\n            }\n        };\n        this.wrapper.addEventListener('mousemove', eventMove);\n        this.wrapper.addEventListener('touchmove', eventMove);\n        this.on('disable-drag-selection', () => {\n            this.wrapper.removeEventListener('touchmove', eventMove);\n            this.wrapper.removeEventListener('mousemove', eventMove);\n        });\n\n        this.wavesurfer.on('region-created', region => {\n            if (this.regionsMinLength) {\n                region.minLength = this.regionsMinLength;\n            }\n        });\n    }\n\n    disableDragSelection() {\n        this.fireEvent('disable-drag-selection');\n    }\n\n    /**\n     * Get current region\n     *\n     * The smallest region that contains the current time. If several such\n     * regions exist, take the first. Return `null` if none exist.\n     *\n     * @returns {Region} The current region\n     */\n    getCurrentRegion() {\n        const time = this.wavesurfer.getCurrentTime();\n        let min = null;\n        Object.keys(this.list).forEach(id => {\n            const cur = this.list[id];\n            if (cur.start <= time && cur.end >= time) {\n                if (!min || cur.end - cur.start < min.end - min.start) {\n                    min = cur;\n                }\n            }\n        });\n\n        return min;\n    }\n\n    /**\n     * Match the value to the grid, if required\n     *\n     * If the regions plugin params have a snapToGridInterval set, return the\n     * value matching the nearest grid interval. If no snapToGridInterval is set,\n     * the passed value will be returned without modification.\n     *\n     * @param {number} value the value to snap to the grid, if needed\n     * @param {Object} params the regions plugin params\n     * @returns {number} value\n     */\n    getRegionSnapToGridValue(value, params) {\n        if (params.snapToGridInterval) {\n            // the regions should snap to a grid\n            const offset = params.snapToGridOffset || 0;\n            return (\n                Math.round((value - offset) / params.snapToGridInterval) *\n                    params.snapToGridInterval +\n                offset\n            );\n        }\n\n        // no snap-to-grid\n        return value;\n    }\n}\n","/**\n *  @since 4.0.0\n *\n * (Single) Region plugin class\n *\n * Must be turned into an observer before instantiating. This is done in\n * `RegionsPlugin` (main plugin class).\n *\n * @extends {Observer}\n */\nexport class Region {\n    constructor(params, regionsUtils, ws) {\n        this.wavesurfer = ws;\n        this.wrapper = ws.drawer.wrapper;\n        this.util = ws.util;\n        this.style = this.util.style;\n        this.regionsUtil = regionsUtils;\n        this.vertical = ws.drawer.params.vertical;\n\n        this.id = params.id == null ? ws.util.getId() : params.id;\n        this.start = Number(params.start) || 0;\n        this.end =\n            params.end == null\n                ? // small marker-like region\n                this.start +\n                (4 / this.wrapper.scrollWidth) * this.wavesurfer.getDuration()\n                : Number(params.end);\n        this.resize =\n            params.resize === undefined ? true : Boolean(params.resize);\n        this.drag = params.drag === undefined ? true : Boolean(params.drag);\n        // reflect resize and drag state of region for region-updated listener\n        this.isResizing = false;\n        this.isDragging = false;\n        this.loop = Boolean(params.loop);\n        this.color = params.color || 'rgba(0, 0, 0, 0.1)';\n        // The left and right handleStyle properties can be set to 'none' for\n        // no styling or can be assigned an object containing CSS properties.\n        this.handleStyle = params.handleStyle || {\n            left: {},\n            right: {}\n        };\n        this.handleLeftEl = null;\n        this.handleRightEl = null;\n        this.data = params.data || {};\n        this.attributes = params.attributes || {};\n        this.showTooltip = params.showTooltip ?? true;\n\n        this.maxLength = params.maxLength;\n        // It assumes the minLength parameter value, or the regionsMinLength parameter value, if the first one not provided\n        this.minLength = params.minLength;\n        this._onRedraw = () => this.updateRender();\n\n        this.scroll = params.scroll !== false && ws.params.scrollParent;\n        this.scrollSpeed = params.scrollSpeed || 1;\n        this.scrollThreshold = params.scrollThreshold || 10;\n        // Determines whether the context menu is prevented from being opened.\n        this.preventContextMenu =\n            params.preventContextMenu === undefined\n                ? false\n                : Boolean(params.preventContextMenu);\n\n        // select channel ID to set region\n        let channelIdx =\n            params.channelIdx == null ? -1 : parseInt(params.channelIdx);\n        this.regionHeight = '100%';\n        this.marginTop = '0px';\n\n        if (channelIdx !== -1) {\n            let channelCount =\n                this.wavesurfer.backend.buffer != null\n                    ? this.wavesurfer.backend.buffer.numberOfChannels\n                    : -1;\n            if (channelCount >= 0 && channelIdx < channelCount) {\n                this.regionHeight = Math.floor((1 / channelCount) * 100) + '%';\n                this.marginTop =\n                    this.wavesurfer.getHeight() * channelIdx + 'px';\n            }\n        }\n\n        this.formatTimeCallback = params.formatTimeCallback;\n        this.edgeScrollWidth = params.edgeScrollWidth;\n        this.bindInOut();\n        this.render();\n        this.wavesurfer.on('zoom', this._onRedraw);\n        this.wavesurfer.on('redraw', this._onRedraw);\n        this.wavesurfer.fireEvent('region-created', this);\n    }\n\n    /* Update region params. */\n    update(params, eventParams) {\n        if (params.start != null) {\n            this.start = Number(params.start);\n        }\n        if (params.end != null) {\n            this.end = Number(params.end);\n        }\n        if (params.loop != null) {\n            this.loop = Boolean(params.loop);\n        }\n        if (params.color != null) {\n            this.color = params.color;\n        }\n        if (params.handleStyle != null) {\n            this.handleStyle = params.handleStyle;\n        }\n        if (params.data != null) {\n            this.data = params.data;\n        }\n        if (params.resize != null) {\n            this.resize = Boolean(params.resize);\n            this.updateHandlesResize(this.resize);\n        }\n        if (params.drag != null) {\n            this.drag = Boolean(params.drag);\n        }\n        if (params.maxLength != null) {\n            this.maxLength = Number(params.maxLength);\n        }\n        if (params.minLength != null) {\n            this.minLength = Number(params.minLength);\n        }\n        if (params.attributes != null) {\n            this.attributes = params.attributes;\n        }\n\n        this.updateRender();\n        this.fireEvent('update');\n        this.wavesurfer.fireEvent('region-updated', this, eventParams);\n    }\n\n    /* Remove a single region. */\n    remove() {\n        if (this.element) {\n            this.wrapper.removeChild(this.element.domElement);\n            this.element = null;\n            this.fireEvent('remove');\n            this.wavesurfer.un('zoom', this._onRedraw);\n            this.wavesurfer.un('redraw', this._onRedraw);\n            this.wavesurfer.fireEvent('region-removed', this);\n        }\n    }\n\n    /**\n     * Play the audio region.\n     * @param {number} start Optional offset to start playing at\n     */\n    play(start) {\n        const s = start || this.start;\n        this.wavesurfer.play(s, this.end);\n        this.fireEvent('play');\n        this.wavesurfer.fireEvent('region-play', this);\n    }\n\n    /**\n     * Play the audio region in a loop.\n     * @param {number} start Optional offset to start playing at\n     * */\n    playLoop(start) {\n        this.loop = true;\n        this.play(start);\n    }\n\n    /**\n     * Set looping on/off.\n     * @param {boolean} loop True if should play in loop\n     */\n    setLoop(loop) {\n        this.loop = loop;\n    }\n\n    /* Render a region as a DOM element. */\n    render() {\n        this.element = this.util.withOrientation(\n            this.wrapper.appendChild(document.createElement('region')),\n            this.vertical\n        );\n\n        this.element.className = 'wavesurfer-region';\n        if (this.showTooltip) {\n            this.element.title = this.formatTime(this.start, this.end);\n        }\n        this.element.setAttribute('data-id', this.id);\n\n        for (const attrname in this.attributes) {\n            this.element.setAttribute(\n                'data-region-' + attrname,\n                this.attributes[attrname]\n            );\n        }\n\n        this.style(this.element, {\n            position: 'absolute',\n            zIndex: 2,\n            height: this.regionHeight,\n            top: this.marginTop\n        });\n\n        /* Resize handles */\n        if (this.resize) {\n            this.handleLeftEl = this.util.withOrientation(\n                this.element.appendChild(document.createElement('handle')),\n                this.vertical\n            );\n            this.handleRightEl = this.util.withOrientation(\n                this.element.appendChild(document.createElement('handle')),\n                this.vertical\n            );\n\n            this.handleLeftEl.className = 'wavesurfer-handle wavesurfer-handle-start';\n            this.handleRightEl.className = 'wavesurfer-handle wavesurfer-handle-end';\n\n            // Default CSS properties for both handles.\n            const css = {\n                cursor: this.vertical ? 'row-resize' : 'col-resize',\n                position: 'absolute',\n                top: '0px',\n                width: '2px',\n                height: '100%',\n                backgroundColor: 'rgba(0, 0, 0, 1)'\n            };\n\n            // Merge CSS properties per handle.\n            const handleLeftCss =\n                this.handleStyle.left !== 'none'\n                    ? Object.assign(\n                        { left: '0px' },\n                        css,\n                        this.handleStyle.left\n                    )\n                    : null;\n            const handleRightCss =\n                this.handleStyle.right !== 'none'\n                    ? Object.assign(\n                        { right: '0px' },\n                        css,\n                        this.handleStyle.right\n                    )\n                    : null;\n\n            if (handleLeftCss) {\n                this.style(this.handleLeftEl, handleLeftCss);\n            }\n\n            if (handleRightCss) {\n                this.style(this.handleRightEl, handleRightCss);\n            }\n        }\n\n        this.updateRender();\n        this.bindEvents();\n    }\n\n    formatTime(start, end) {\n        if (this.formatTimeCallback) {\n            return this.formatTimeCallback(start, end);\n        }\n        return (start == end ? [start] : [start, end])\n            .map((time) =>\n                [\n                    Math.floor((time % 3600) / 60), // minutes\n                    ('00' + Math.floor(time % 60)).slice(-2) // seconds\n                ].join(':')\n            )\n            .join('-');\n    }\n\n    getWidth() {\n        return this.wavesurfer.drawer.width / this.wavesurfer.params.pixelRatio;\n    }\n\n    /* Update element's position, width, color. */\n    updateRender() {\n        // duration varies during loading process, so don't overwrite important data\n        const dur = this.wavesurfer.getDuration();\n        const width = this.getWidth();\n\n        let startLimited = this.start;\n        let endLimited = this.end;\n        if (startLimited < 0) {\n            startLimited = 0;\n            endLimited = endLimited - startLimited;\n        }\n        if (endLimited > dur) {\n            endLimited = dur;\n            startLimited = dur - (endLimited - startLimited);\n        }\n\n        if (this.minLength != null) {\n            endLimited = Math.max(startLimited + this.minLength, endLimited);\n        }\n\n        if (this.maxLength != null) {\n            endLimited = Math.min(startLimited + this.maxLength, endLimited);\n        }\n\n        if (this.element != null) {\n            // Calculate the left and width values of the region such that\n            // no gaps appear between regions.\n            const left = Math.round((startLimited / dur) * width);\n            const regionWidth = Math.round((endLimited / dur) * width) - left;\n\n            this.style(this.element, {\n                left: left + 'px',\n                width: regionWidth + 'px',\n                backgroundColor: this.color,\n                cursor: this.drag ? 'move' : 'default'\n            });\n\n            for (const attrname in this.attributes) {\n                this.element.setAttribute(\n                    'data-region-' + attrname,\n                    this.attributes[attrname]\n                );\n            }\n\n            if (this.showTooltip) {\n                this.element.title = this.formatTime(this.start, this.end);\n            }\n        }\n    }\n\n    /* Bind audio events. */\n    bindInOut() {\n        this.firedIn = false;\n        this.firedOut = false;\n\n        const onProcess = (time) => {\n            let start = Math.round(this.start * 10) / 10;\n            let end = Math.round(this.end * 10) / 10;\n            time = Math.round(time * 10) / 10;\n\n            if (\n                !this.firedOut &&\n                this.firedIn &&\n                (start > time || end <= time)\n            ) {\n                this.firedOut = true;\n                this.firedIn = false;\n                this.fireEvent('out');\n                this.wavesurfer.fireEvent('region-out', this);\n            }\n            if (!this.firedIn && start <= time && end > time) {\n                this.firedIn = true;\n                this.firedOut = false;\n                this.fireEvent('in');\n                this.wavesurfer.fireEvent('region-in', this);\n            }\n        };\n\n        this.wavesurfer.backend.on('audioprocess', onProcess);\n\n        this.on('remove', () => {\n            this.wavesurfer.backend.un('audioprocess', onProcess);\n        });\n\n        /* Loop playback. */\n        this.on('out', () => {\n            if (this.loop) {\n                const realTime = this.wavesurfer.getCurrentTime();\n                if (realTime >= this.start && realTime <= this.end) {\n                    this.wavesurfer.play(this.start);\n                }\n            }\n        });\n    }\n\n    /* Bind DOM events. */\n    bindEvents() {\n        const preventContextMenu = this.preventContextMenu;\n\n        this.element.addEventListener('mouseenter', (e) => {\n            this.fireEvent('mouseenter', e);\n            this.wavesurfer.fireEvent('region-mouseenter', this, e);\n        });\n\n        this.element.addEventListener('mouseleave', (e) => {\n            this.fireEvent('mouseleave', e);\n            this.wavesurfer.fireEvent('region-mouseleave', this, e);\n        });\n\n        this.element.addEventListener('click', (e) => {\n            e.preventDefault();\n            this.fireEvent('click', e);\n            this.wavesurfer.fireEvent('region-click', this, e);\n        });\n\n        this.element.addEventListener('dblclick', (e) => {\n            e.stopPropagation();\n            e.preventDefault();\n            this.fireEvent('dblclick', e);\n            this.wavesurfer.fireEvent('region-dblclick', this, e);\n        });\n\n        this.element.addEventListener('contextmenu', (e) => {\n            if (preventContextMenu) {\n                e.preventDefault();\n            }\n            this.fireEvent('contextmenu', e);\n            this.wavesurfer.fireEvent('region-contextmenu', this, e);\n        });\n\n        /* Drag or resize on mousemove. */\n        if (this.drag || this.resize) {\n            this.bindDragEvents();\n        }\n    }\n\n    bindDragEvents() {\n        const container = this.wavesurfer.drawer.container;\n        const scrollSpeed = this.scrollSpeed;\n        const scrollThreshold = this.scrollThreshold;\n        let startTime;\n        let touchId;\n        let drag;\n        let maxScroll;\n        let resize;\n        let updated = false;\n        let scrollDirection;\n        let wrapperRect;\n        let regionLeftHalfTime;\n        let regionRightHalfTime;\n\n        // Scroll when the user is dragging within the threshold\n        const edgeScroll = (event) => {\n            let orientedEvent = this.util.withOrientation(event, this.vertical);\n            const duration = this.wavesurfer.getDuration();\n            if (!scrollDirection || (!drag && !resize)) {\n                return;\n            }\n\n            const x = orientedEvent.clientX;\n            let distanceBetweenCursorAndWrapperEdge = 0;\n            let regionHalfTimeWidth = 0;\n            let adjustment = 0;\n\n            // Get the currently selected time according to the mouse position\n            let time = this.regionsUtil.getRegionSnapToGridValue(\n                this.wavesurfer.drawer.handleEvent(event) * duration\n            );\n\n            if (drag) {\n                // Considering the point of contact with the region while edgescrolling\n                if (scrollDirection === -1) {\n                    regionHalfTimeWidth = regionLeftHalfTime * this.wavesurfer.params.minPxPerSec;\n                    distanceBetweenCursorAndWrapperEdge = x - wrapperRect.left;\n                } else {\n                    regionHalfTimeWidth = regionRightHalfTime * this.wavesurfer.params.minPxPerSec;\n                    distanceBetweenCursorAndWrapperEdge = wrapperRect.right - x;\n                }\n            } else {\n                // Considering minLength while edgescroll\n                let minLength = this.minLength;\n                if (!minLength) {\n                    minLength = 0;\n                }\n\n                if (resize === 'start') {\n                    if (time > this.end - minLength) {\n                        time = this.end - minLength;\n                        adjustment = scrollSpeed * scrollDirection;\n                    }\n\n                    if (time < 0) {\n                        time = 0;\n                    }\n                } else if (resize === 'end') {\n                    if (time < this.start + minLength) {\n                        time = this.start + minLength;\n                        adjustment = scrollSpeed * scrollDirection;\n                    }\n\n                    if (time > duration) {\n                        time = duration;\n                    }\n                }\n            }\n\n            // Don't edgescroll if region has reached min or max limit\n            const wrapperScrollLeft = this.wrapper.scrollLeft;\n\n            if (scrollDirection === -1) {\n                if (Math.round(wrapperScrollLeft) === 0) {\n                    return;\n                }\n\n                if (Math.round(wrapperScrollLeft - regionHalfTimeWidth + distanceBetweenCursorAndWrapperEdge) <= 0) {\n                    return;\n                }\n            } else {\n                if (Math.round(wrapperScrollLeft) === maxScroll) {\n                    return;\n                }\n\n                if (Math.round(wrapperScrollLeft + regionHalfTimeWidth - distanceBetweenCursorAndWrapperEdge) >= maxScroll) {\n                    return;\n                }\n            }\n\n            // Update scroll position\n            let scrollLeft = wrapperScrollLeft - adjustment + scrollSpeed * scrollDirection;\n\n            if (scrollDirection === -1) {\n                const calculatedLeft = Math.max(0 + regionHalfTimeWidth - distanceBetweenCursorAndWrapperEdge, scrollLeft);\n                this.wrapper.scrollLeft = scrollLeft = calculatedLeft;\n            } else {\n                const calculatedRight = Math.min(maxScroll - regionHalfTimeWidth + distanceBetweenCursorAndWrapperEdge, scrollLeft);\n                this.wrapper.scrollLeft = scrollLeft = calculatedRight;\n            }\n\n            const delta = time - startTime;\n            startTime = time;\n\n            // Continue dragging or resizing\n            drag ? this.onDrag(delta) : this.onResize(delta, resize);\n\n            // Repeat\n            window.requestAnimationFrame(() => {\n                edgeScroll(event);\n            });\n        };\n\n        const onDown = (event) => {\n            const duration = this.wavesurfer.getDuration();\n            if (event.touches && event.touches.length > 1) {\n                return;\n            }\n            touchId = event.targetTouches ? event.targetTouches[0].identifier : null;\n\n            // stop the event propagation, if this region is resizable or draggable\n            // and the event is therefore handled here.\n            if (this.drag || this.resize) {\n                event.stopPropagation();\n            }\n\n            // Store the selected startTime we begun dragging or resizing\n            startTime = this.regionsUtil.getRegionSnapToGridValue(\n                this.wavesurfer.drawer.handleEvent(event, true) * duration\n            );\n\n            // Store the selected point of contact when we begin dragging\n            regionLeftHalfTime = startTime - this.start;\n            regionRightHalfTime = this.end - startTime;\n\n            // Store for scroll calculations\n            maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n\n            wrapperRect = this.util.withOrientation(\n                this.wrapper.getBoundingClientRect(),\n                this.vertical\n            );\n\n            this.isResizing = false;\n            this.isDragging = false;\n            if (event.target.tagName.toLowerCase() === 'handle') {\n                this.isResizing = true;\n                resize = event.target.classList.contains('wavesurfer-handle-start')\n                    ? 'start'\n                    : 'end';\n            } else {\n                this.isDragging = true;\n                drag = true;\n                resize = false;\n            }\n        };\n        const onUp = (event) => {\n            if (event.touches && event.touches.length > 1) {\n                return;\n            }\n\n            if (drag || resize) {\n                this.isDragging = false;\n                this.isResizing = false;\n                drag = false;\n                scrollDirection = null;\n                resize = false;\n            }\n\n            if (updated) {\n                updated = false;\n                this.util.preventClick();\n                this.fireEvent('update-end', event);\n                this.wavesurfer.fireEvent('region-update-end', this, event);\n            }\n        };\n        const onMove = (event) => {\n            const duration = this.wavesurfer.getDuration();\n            let orientedEvent = this.util.withOrientation(event, this.vertical);\n\n            if (event.touches && event.touches.length > 1) {\n                return;\n            }\n            if (event.targetTouches && event.targetTouches[0].identifier != touchId) {\n                return;\n            }\n            if (!drag && !resize) {\n                return;\n            }\n\n            const oldTime = startTime;\n            let time = this.regionsUtil.getRegionSnapToGridValue(\n                this.wavesurfer.drawer.handleEvent(event) * duration\n            );\n\n            if (drag) {\n                // To maintain relative cursor start point while dragging\n                const maxEnd = this.wavesurfer.getDuration();\n                if (time > maxEnd - regionRightHalfTime) {\n                    time = maxEnd - regionRightHalfTime;\n                }\n\n                if (time - regionLeftHalfTime < 0) {\n                    time = regionLeftHalfTime;\n                }\n            }\n\n            if (resize) {\n                // To maintain relative cursor start point while resizing\n                // we have to handle for minLength\n                let minLength = this.minLength;\n                if (!minLength) {\n                    minLength = 0;\n                }\n\n                if (resize === 'start') {\n                    if (time > this.end - minLength) {\n                        time = this.end - minLength;\n                    }\n\n                    if (time < 0) {\n                        time = 0;\n                    }\n                } else if (resize === 'end') {\n                    if (time < this.start + minLength) {\n                        time = this.start + minLength;\n                    }\n\n                    if (time > duration) {\n                        time = duration;\n                    }\n                }\n            }\n\n            let delta = time - startTime;\n            startTime = time;\n\n            // Drag\n            if (this.drag && drag) {\n                updated = updated || !!delta;\n                this.onDrag(delta);\n            }\n\n            // Resize\n            if (this.resize && resize) {\n                updated = updated || !!delta;\n                this.onResize(delta, resize);\n            }\n\n            if (\n                this.scroll && container.clientWidth < this.wrapper.scrollWidth\n            ) {\n                // Triggering edgescroll from within edgeScrollWidth\n                let x = orientedEvent.clientX;\n\n                // Check direction\n                if (x < wrapperRect.left + this.edgeScrollWidth) {\n                    scrollDirection = -1;\n                } else if (x > wrapperRect.right - this.edgeScrollWidth) {\n                    scrollDirection = 1;\n                } else {\n                    scrollDirection = null;\n                }\n\n                if (scrollDirection) {\n                    edgeScroll(event);\n                }\n            }\n        };\n\n        this.element.addEventListener('mousedown', onDown);\n        this.element.addEventListener('touchstart', onDown);\n\n        document.body.addEventListener('mousemove', onMove);\n        document.body.addEventListener('touchmove', onMove, {passive: false});\n\n        document.addEventListener('mouseup', onUp);\n        document.body.addEventListener('touchend', onUp);\n\n        this.on('remove', () => {\n            document.removeEventListener('mouseup', onUp);\n            document.body.removeEventListener('touchend', onUp);\n            document.body.removeEventListener('mousemove', onMove);\n            document.body.removeEventListener('touchmove', onMove);\n        });\n\n        this.wavesurfer.on('destroy', () => {\n            document.removeEventListener('mouseup', onUp);\n            document.body.removeEventListener('touchend', onUp);\n        });\n    }\n\n    onDrag(delta) {\n        const maxEnd = this.wavesurfer.getDuration();\n        if (this.end + delta > maxEnd) {\n            delta = maxEnd - this.end;\n        }\n\n        if (this.start + delta < 0) {\n            delta = this.start * -1;\n        }\n\n        const eventParams = {\n            direction: this._getDragDirection(delta),\n            action: 'drag'\n        };\n\n        this.update({\n            start: this.start + delta,\n            end: this.end + delta\n        }, eventParams);\n    }\n\n    /**\n     * Returns the direction of dragging region based on delta\n     * Negative delta means region is moving to the left\n     * Positive - to the right\n     * For zero delta the direction is not defined\n     * @param {number} delta Drag offset\n     * @returns {string|null} Direction 'left', 'right' or null\n     */\n    _getDragDirection(delta) {\n        if (delta < 0) {\n            return 'left';\n        }\n        if (delta > 0) {\n            return 'right';\n        }\n        return null;\n    }\n\n    /**\n     * @example\n     * onResize(-5, 'start') // Moves the start point 5 seconds back\n     * onResize(0.5, 'end') // Moves the end point 0.5 seconds forward\n     *\n     * @param {number} delta How much to add or subtract, given in seconds\n     * @param {string} direction 'start 'or 'end'\n     */\n    onResize(delta, direction) {\n        const duration = this.wavesurfer.getDuration();\n        const eventParams = {\n            action: 'resize',\n            direction: direction === 'start' ? 'right' : 'left'\n        };\n\n        if (direction === 'start') {\n            // Check if changing the start by the given delta would result in the region being smaller than minLength\n            // Ignore cases where we are making the region wider rather than shrinking it\n            if (delta > 0 && this.end - (this.start + delta) < this.minLength) {\n                delta = this.end - this.minLength - this.start;\n            }\n\n            if (delta < 0 && (this.start + delta) < 0) {\n                delta = this.start * -1;\n            }\n\n            this.update({\n                start: Math.min(this.start + delta, this.end),\n                end: Math.max(this.start + delta, this.end)\n            }, eventParams);\n        } else {\n            // Check if changing the end by the given delta would result in the region being smaller than minLength\n            // Ignore cases where we are making the region wider rather than shrinking it\n            if (delta < 0 && this.end + delta - this.start < this.minLength) {\n                delta = this.start + this.minLength - this.end;\n            }\n\n            if (delta > 0 && (this.end + delta) > duration) {\n                delta = duration - this.end;\n            }\n\n            this.update({\n                start: Math.min(this.end + delta, this.start),\n                end: Math.max(this.end + delta, this.start)\n            }, eventParams);\n        }\n    }\n\n    updateHandlesResize(resize) {\n        let cursorStyle;\n        if (resize) {\n            cursorStyle = this.vertical ? 'row-resize' : 'col-resize';\n        } else {\n            cursorStyle = 'auto';\n        }\n\n        this.handleLeftEl && this.style(this.handleLeftEl, { cursor: cursorStyle });\n        this.handleRightEl && this.style(this.handleRightEl, { cursor: cursorStyle });\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(23);\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}